<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kartao.cz – Slevy & Kupóny (mini Slevomat)</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            fuchsia: tailwind.colors.fuchsia,
            amber: tailwind.colors.amber,
            neutral: tailwind.colors.neutral,
            emerald: tailwind.colors.emerald,
            sky: tailwind.colors.sky,
            rose: tailwind.colors.rose,
          },
          boxShadow: {
            soft: "0 18px 45px rgba(15,23,42,0.85)",
          },
        },
      },
    };
  </script>

  <!-- Ikony -->
  <!-- Lucide ikony - unified system -->
  <script src="https://cdn.jsdelivr.net/npm/lucide@latest/dist/umd/lucide.min.js"></script>
</head>
<body class="min-h-screen bg-gradient-to-b from-black via-neutral-950 to-black text-white py-10">
  <div class="max-w-6xl mx-auto px-4">
    <!-- Horní lišta -->
    <header class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8">
      <div>
        <a href="index.html" class="inline-flex items-center gap-3 mb-3">
          <div class="w-9 h-9 rounded-2xl bg-gradient-to-tr from-emerald-400 to-emerald-500 grid place-items-center">
            <i data-lucide="crown" class="w-5 h-5 text-neutral-950"></i>
          </div>
          <style>
            .logo-slevy {
              background: linear-gradient(135deg, #0ea5e9 0%, #7dd3fc 100%);
              border: 2px solid #0ea5e9;
            }
          </style>
          <script>document.querySelector('.w-9.h-9.rounded-2xl').classList.add('logo-slevy');</script>
          </div>
          <div>
            <div class="flex items-center gap-2">
              <span class="font-semibold text-lg">Kartao.cz</span>
              <span class="px-2 py-0.5 rounded-full text-[11px] bg-emerald-500/15 text-emerald-200 border border-emerald-400/40">
                Slevy & Kupóny
              </span>
            </div>
                        <i data-lucide="crown" class="w-5 h-5 text-neutral-950"></i>
          </div>
        </a>
        <div class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-amber-500/10 border border-amber-400/50 text-[11px] text-amber-200">
          <i data-lucide="sparkles" class="w-4 h-4"></i>
          <span>Mini Slevomat · partnerské nabídky Kartao</span>
        </div>
        <h1 class="mt-3 text-3xl md:text-4xl font-bold flex items-center gap-2">
          <span>Slevy & Kupóny</span>
        </h1>
        <p class="mt-1 text-sm text-white/65 max-w-2xl">
          Vyber si odměnu z partnerských nabídek. Slevové kupony získáš z <a href="mystery-box.html" class="text-amber-300 font-semibold hover:text-amber-400 underline decoration-amber-300/50 hover:decoration-amber-400 transition-all duration-200">K-Coins Mystery Boxu</a>,
          tady je proměníš za konkrétní zážitek nebo nákup.
        </p>
      </div>
      <div class="flex flex-col sm:flex-row gap-2">
        <a href="mystery-box.html" class="inline-flex items-center gap-2 px-4 py-2 rounded-full border border-amber-500/60 bg-amber-500/10 text-xs font-semibold text-amber-100 hover:bg-amber-500/20">
          <i data-lucide="sparkles" class="w-4 h-4"></i>
          <span>Mystery Box</span>
        </a>
        <a
            href="moje-karta.html"
            class="inline-flex items-center gap-2 rounded-2xl border border-sky-500/60 bg-sky-500/10 px-3 py-1.5 text-xs font-medium text-sky-100 hover:bg-sky-500/20"
          >
            ← Zpět na kredity
          </a>
        <a href="moje-vyhry.html" class="inline-flex items-center gap-2 px-4 py-2 rounded-full border border-sky-500/60 bg-sky-500/10 text-xs font-semibold text-sky-100 hover:bg-sky-500/20">
          <i data-lucide="trophy" class="w-4 h-4"></i>
          <span>Zpět na moje výhry</span>
        </a>
      </div>
    </header>

    <!-- Info o kuponu z ekosystému Kartao -->
    <section id="couponInfo" class="mb-5 hidden">
      <div class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-emerald-500/10 border border-emerald-400/40 text-[11px] text-emerald-200">
        <i data-lucide="ticket-percent" class="w-4 h-4"></i>
        <span>
          Aktivní slevové kupony: <span id="couponCount" class="font-semibold text-emerald-100">0</span>
        </span>
      </div>
    </section>

    <!-- Stav bez kuponu -->
    <section id="noCouponState" class="mb-6 rounded-2xl border border-dashed border-white/15 bg-neutral-900/70 px-5 py-4 text-sm text-white/70 hidden">
      <div class="flex flex-col sm:flex-row sm:items-center gap-3">
        <div class="inline-flex items-center justify-center w-10 h-10 rounded-2xl bg-neutral-800 border border-white/15">
          <i data-lucide="lock" class="w-5 h-5 text-amber-300"></i>
        </div>
        <div>
          <p class="font-semibold text-white mb-1">Zatím nemáš aktivní slevový kupon</p>
          <p class="text-xs text-white/60 mb-2">
            Nabídky si můžeš jen <span class="font-semibold">prohlížet</span>. Skutečné uplatnění se odemkne, jakmile ve hře vytočíš odměnu
            typu <span class="text-amber-300 font-semibold">sleva / kupon</span> v Mystery Boxu.
          </p>
          <a href="mystery-box.html" class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gradient-to-r from-fuchsia-500 to-amber-400 text-[11px] font-semibold text-neutral-950 shadow-soft hover:brightness-110 active:scale-[0.98]">
            <i data-lucide="sparkles" class="w-4 h-4"></i>
            <span>Jít otevřít Mystery Box</span>
          </a>
        </div>
      </div>
    </section>

    <!-- Filtry kategorií -->
    <section class="mb-5 flex flex-wrap gap-2 text-xs">
      <button data-filter="all" class="filter-btn px-3 py-1.5 rounded-full bg-amber-500 text-neutral-950 font-semibold shadow-soft">
        Vše
      </button>
      <button data-filter="Pobyty & wellness" class="filter-btn px-3 py-1.5 rounded-full bg-neutral-900 border border-white/10 text-white/80 hover:bg-neutral-800">
        Pobyty & wellness
      </button>
      <button data-filter="Jídlo & restaurace" class="filter-btn px-3 py-1.5 rounded-full bg-neutral-900 border border-white/10 text-white/80 hover:bg-neutral-800">
        Jídlo & restaurace
      </button>
      <button data-filter="E‑shop slevy" class="filter-btn px-3 py-1.5 rounded-full bg-neutral-900 border border-white/10 text-white/80 hover:bg-neutral-800">
        E‑shop slevy
      </button>
      <button data-filter="Zážitky" class="filter-btn px-3 py-1.5 rounded-full bg-neutral-900 border border-white/10 text-white/80 hover:bg-neutral-800">
        Zážitky
      </button>
    </section>

    <!-- GRID nabídek -->
    <section id="offersGrid" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
      <!-- Nabídka 1: Sleva 10 % globálně -->
      <article data-category="E‑shop slevy" class="offer-card group relative overflow-hidden rounded-3xl bg-gradient-to-br from-neutral-900 via-neutral-950 to-neutral-950 border border-amber-400/60 shadow-soft">
        <div class="relative h-36 overflow-hidden">
          <img src="https://images.unsplash.com/photo-1556740749-887f6717d7e4?auto=format&fit=crop&w=800&q=60" alt="Nákup" class="w-full h-full object-cover opacity-80 group-hover:scale-105 transition-transform duration-500" />
          <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/30 to-transparent"></div>
          <div class="absolute bottom-3 left-3 inline-flex items-center gap-2 px-3 py-1 rounded-full bg-amber-400 text-neutral-950 text-[11px] font-semibold">
            <i data-lucide="percent" class="w-4 h-4"></i>
            <span>Sleva 10 %</span>
          </div>
        </div>
        <div class="p-4 flex flex-col gap-3">
          <div>
            <h2 class="text-base font-semibold text-amber-100 mb-1">Sleva 10 % na nákup u partnerů</h2>
            <p class="text-xs text-white/65">Platí na vybrané e‑shopy v ekosystému Kartao. Využij slevový kód z tvého tiketu.</p>
          </div>
          <div class="mt-1 flex items-center justify-between text-[11px] text-white/55">
            <span>Kategorie: <span class="text-amber-200">E‑shop slevy</span></span>
            <span>Partner: <span class="text-white/80">více obchodů</span></span>
          </div>
          <a href="https://www.slevao.cz" target="_blank"
            class="mt-3 inline-flex items-center justify-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-amber-400 via-amber-300 to-yellow-300 text-[11px] font-semibold text-neutral-950 shadow-md shadow-amber-500/40 hover:brightness-110 active:scale-[0.98] transition">
            <i data-lucide="ticket-percent" class="w-4 h-4"></i>
            <span>Vybrat tuto slevu</span>
          </a>
        </div>
      </article>

      <!-- Nabídka 2: Zážitkový pobyt -->
      <article data-category="Pobyty & wellness" class="offer-card group relative overflow-hidden rounded-3xl bg-gradient-to-br from-neutral-900 via-neutral-950 to-neutral-950 border border-fuchsia-400/60 shadow-soft">
        <div class="relative h-36 overflow-hidden">
          <img src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=800&q=60" alt="Wellness" class="w-full h-full object-cover opacity-80 group-hover:scale-105 transition-transform duration-500" />
          <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/30 to-transparent"></div>
          <div class="absolute bottom-3 left-3 inline-flex items-center gap-2 px-3 py-1 rounded-full bg-fuchsia-400 text-neutral-950 text-[11px] font-semibold">
            <i data-lucide="home" class="w-4 h-4"></i>
            <span>Chata & pobyt</span>
          </div>
        </div>
        <div class="p-4 flex flex-col gap-3">
          <div>
            <h2 class="text-base font-semibold text-fuchsia-100 mb-1">Zážitkový pobyt pro jednotlivce i skupiny</h2>
            <p class="text-xs text-white/65">Flexibilní pobyt v partnerské chatě. Vyber si styl i program podle aktuální nabídky.</p>
          </div>
          <div class="mt-1 flex items-center justify-between text-[11px] text-white/55">
            <span>Kategorie: <span class="text-amber-200">Pobyty & wellness</span></span>
            <span>Partner: <span class="text-white/80">zážitkový resort</span></span>
          </div>
          <a href="https://www.chatao.cz" target="_blank"
            class="mt-3 inline-flex items-center justify-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-fuchsia-500 via-amber-400 to-yellow-300 text-[11px] font-semibold text-neutral-950 shadow-md shadow-amber-500/40 hover:brightness-110 active:scale-[0.98] transition">
            <i data-lucide="gift" class="w-4 h-4"></i>
            <span>Chci tento pobyt</span>
          </a>
        </div>
      </article>

      <!-- Nabídka 3: Večeře v restauraci -->
      <article data-category="Jídlo & restaurace" class="offer-card group relative overflow-hidden rounded-3xl bg-gradient-to-br from-neutral-900 via-neutral-950 to-neutral-950 border border-emerald-400/60 shadow-soft">
        <div class="relative h-36 overflow-hidden">
          <img src="https://images.unsplash.com/photo-1551632436-cbf8dd35adfa?auto=format&fit=crop&w=800&q=60" alt="Restaurace" class="w-full h-full object-cover opacity-80 group-hover:scale-105 transition-transform duration-500" />
          <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/30 to-transparent"></div>
          <div class="absolute bottom-3 left-3 inline-flex items-center gap-2 px-3 py-1 rounded-full bg-emerald-400 text-neutral-950 text-[11px] font-semibold">
            <i data-lucide="utensils" class="w-4 h-4"></i>
            <span>Jídlo</span>
          </div>
        </div>
        <div class="p-4 flex flex-col gap-3">
          <div>
            <h2 class="text-base font-semibold text-emerald-100 mb-1">Gurmánský zážitek v partnerské restauraci</h2>
            <p class="text-xs text-white/65">Tříchodové menu ve vybraných restauracích Kartao partnerů — vhodné pro jednotlivce, dvojice i větší skupiny.</p>
          </div>
          <div class="mt-1 flex items-center justify-between text-[11px] text-white/55">
            <span>Kategorie: <span class="text-amber-200">Jídlo & restaurace</span></span>
            <span>Partner: <span class="text-white/80">vybraná restaurace</span></span>
          </div>
          <a href="https://www.gurmao.cz" target="_blank"
            class="mt-3 inline-flex items-center justify-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-emerald-400 via-sky-400 to-emerald-300 text-[11px] font-semibold text-neutral-950 shadow-md shadow-emerald-500/40 hover:brightness-110 active:scale-[0.98] transition">
            <i data-lucide="ticket" class="w-4 h-4"></i>
            <span>Vybrat jídlo</span>
          </a>
        </div>
      </article>
    </section>
  </div>

  <script>
    window.addEventListener("DOMContentLoaded", () => {
      if (window.lucide) lucide.createIcons();

      const couponInfo = document.getElementById("couponInfo");
      const couponCountEl = document.getElementById("couponCount");
      const noCouponState = document.getElementById("noCouponState");
      const offersGrid = document.getElementById("offersGrid");

      // 1) Načti výhry z ekosystému Kartao (Mystery Box) – stejné úložiště jako Moje výhry
      let rewards = [];
      try {
        rewards = JSON.parse(localStorage.getItem("kartao_rewards") || "[]");
      } catch (e) {
        rewards = [];
      }

      const couponRewards = rewards.filter(r => r.type === "ticket");

      if (!couponRewards || couponRewards.length === 0) {
        // Nemá žádný kupon → jen prohlížení
        if (noCouponState) noCouponState.classList.remove("hidden");
        if (offersGrid) offersGrid.classList.add("opacity-60");
      } else {
        // Má alespoň jeden kupon → zobrazíme info lištu
        if (couponInfo) couponInfo.classList.remove("hidden");
        if (couponCountEl) couponCountEl.textContent = String(couponRewards.length);
      }

      // 2) Klik na nabídku – zatím jen demo hook
      document.querySelectorAll("[data-offer-id]").forEach((btn) => {
        btn.addEventListener("click", () => {
          const offerId = btn.getAttribute("data-offer-id") || "";

          alert(
            "Tady se v další fázi propojí výběr konkrétní nabídky s tvým účtem v Kartao.\n\n" +
            "Vybraná nabídka: " + offerId + "\n\n" +
            "Napojíme na backend, odečteme příslušný ticket z Moje výhry a pošleme potvrzení e‑mailem."
          );
        });
      });

      // 3) Filtry kategorií
      const filterButtons = document.querySelectorAll(".filter-btn");
      const offerCards = document.querySelectorAll(".offer-card");

      filterButtons.forEach((btn) => {
        btn.addEventListener("click", () => {
          const filterValue = btn.getAttribute("data-filter");

          // Aktualizace aktivního tlačítka
          filterButtons.forEach((b) => {
            b.classList.remove("bg-amber-500", "text-neutral-950", "font-semibold", "shadow-soft");
            b.classList.add("bg-neutral-900", "border", "border-white/10", "text-white/80");
          });
          btn.classList.remove("bg-neutral-900", "border", "border-white/10", "text-white/80");
          btn.classList.add("bg-amber-500", "text-neutral-950", "font-semibold", "shadow-soft");

          // Filtrování nabídek
          offerCards.forEach((card) => {
            const category = card.getAttribute("data-category");
            if (filterValue === "all" || category === filterValue) {
              card.style.display = "";
            } else {
              card.style.display = "none";
            }
          });
        });
      });
    });
  </script>
</body>
</html>

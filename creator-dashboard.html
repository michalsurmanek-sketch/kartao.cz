<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kartao ‚Äì Dashboard tv≈Ørce</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üëë</text></svg>">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    body { 
      background: radial-gradient(circle at top right, rgba(219, 88, 246, 0.15), transparent 50%),
                  radial-gradient(circle at bottom left, rgba(251, 191, 36, 0.12), transparent 60%),
                  #0a0a0a;
    }
    .card {
      background: rgba(23, 23, 23, 0.7);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 1.5rem;
      backdrop-filter: blur(12px);
    }
    .btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.65rem 1.2rem;
      border-radius: 0.85rem;
      font-weight: 500;
      transition: all 0.2s;
    }
    .btn-primary {
      background: linear-gradient(135deg, #db58f6 0%, #fbbf24 100%);
      color: #fff;
      border: none;
    }
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(219, 88, 246, 0.3);
    }
    .btn-outline {
      border: 1px solid rgba(255, 255, 255, 0.2);
      color: #fff;
      background: transparent;
    }
    .btn-outline:hover {
      background: rgba(255, 255, 255, 0.05);
      border-color: rgba(219, 88, 246, 0.5);
    }
    .stat-card {
      background: linear-gradient(135deg, rgba(219, 88, 246, 0.08), rgba(251, 191, 36, 0.05));
      border: 1px solid rgba(219, 88, 246, 0.2);
      border-radius: 1rem;
      padding: 1.5rem;
      backdrop-filter: blur(10px);
    }
    input, textarea, select {
      transition: all 0.2s;
    }
    input:focus, textarea:focus, select:focus {
      outline: none;
      border-color: #db58f6;
      box-shadow: 0 0 0 3px rgba(219, 88, 246, 0.1);
    }
    .platform-card {
      transition: all 0.3s;
      cursor: pointer;
    }
    .platform-card:hover {
      transform: translateY(-4px);
      border-color: rgba(219, 88, 246, 0.4);
    }
    .order-badge {
      display: inline-flex;
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 600;
    }
    .badge-pending { background: rgba(251, 191, 36, 0.2); color: #fbbf24; }
    .badge-active { background: rgba(34, 197, 94, 0.2); color: #22c55e; }
    .badge-completed { background: rgba(59, 130, 246, 0.2); color: #3b82f6; }
  </style>
</head>
<body class="min-h-screen text-white">
  
  <!-- HEADER -->
  <header class="sticky top-0 z-50 border-b border-white/10 bg-neutral-950/80 backdrop-blur-lg">
    <div class="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
      <a href="index.html" class="flex items-center gap-3 group">
        <div class="w-10 h-10 rounded-2xl bg-gradient-to-tr from-fuchsia-500 to-amber-400 grid place-items-center group-hover:scale-110 transition-transform">
          <i data-lucide="crown" class="w-5 h-5 text-white"></i>
        </div>
        <div>
          <div class="font-bold text-lg">Kartao</div>
          <div class="text-xs text-white/60">Dashboard tv≈Ørce</div>
        </div>
      </a>
      
      <nav class="hidden md:flex items-center gap-4 text-sm">
        <a href="kartao-marketplace.html" class="text-white/70 hover:text-white transition flex items-center gap-2">
          <i data-lucide="search" class="w-4 h-4"></i>
          Marketplace
        </a>
        <a href="chat.html" class="text-white/70 hover:text-white transition flex items-center gap-2">
          <i data-lucide="message-circle" class="w-4 h-4"></i>
          Zpr√°vy
        </a>
        <a href="earnings-management.html" class="text-white/70 hover:text-white transition flex items-center gap-2">
          <i data-lucide="trending-up" class="w-4 h-4"></i>
          V√Ωdƒõlky
        </a>
      </nav>
      
      <div class="flex items-center gap-3">
        <button id="notificationBtn" class="relative p-2 rounded-xl hover:bg-white/5 transition">
          <i data-lucide="bell" class="w-5 h-5"></i>
          <span class="absolute top-1 right-1 w-2 h-2 bg-fuchsia-500 rounded-full"></span>
        </button>
        <a href="index.html" class="btn btn-outline text-sm">
          <i data-lucide="home" class="w-4 h-4"></i>
          <span class="hidden sm:inline">Zpƒõt na web</span>
        </a>
        <button id="logout" class="btn btn-primary text-sm">
          <i data-lucide="log-out" class="w-4 h-4"></i>
          <span class="hidden sm:inline">Odhl√°sit</span>
        </button>
      </div>
    </div>
  </header>

  <!-- BREADCRUMBS -->
  <nav class="border-b border-white/10 bg-neutral-900/30 backdrop-blur" aria-label="breadcrumb">
    <div class="max-w-7xl mx-auto px-4 py-3">
      <ol class="flex items-center gap-2 text-sm">
        <li><a href="index.html" class="text-white/70 hover:text-white transition flex items-center gap-1">
          <i data-lucide="home" class="w-3 h-3"></i>
          Dom≈Ø
        </a></li>
        <i data-lucide="chevron-right" class="w-3 h-3 text-white/40"></i>
        <li><a href="kartao-muj-ucet.html" class="text-white/70 hover:text-white transition">M≈Øj √∫ƒçet</a></li>
        <i data-lucide="chevron-right" class="w-3 h-3 text-white/40"></i>
        <li class="text-fuchsia-400 font-semibold">Dashboard tv≈Ørce</li>
      </ol>
    </div>
  </nav>

  <!-- MAIN CONTENT -->
  <main class="max-w-7xl mx-auto px-4 py-8">
    
    <!-- WELCOME BANNER -->
    <section class="mb-8 card p-6 relative overflow-hidden">
      <div class="absolute inset-0 bg-gradient-to-r from-fuchsia-500/10 via-transparent to-amber-400/10"></div>
      <div class="relative z-10">
        <div class="flex items-center justify-between mb-4">
          <div>
            <h1 class="text-3xl font-bold mb-2">
              V√≠tej zpƒõt, <span id="userName" class="text-transparent bg-clip-text bg-gradient-to-r from-fuchsia-400 to-amber-400">Tv≈Ørƒçe</span>! üëã
            </h1>
            <p class="text-white/70">Tady najde≈° p≈ôehled tv√Ωch aktivit, p≈ô√≠jm≈Ø a objedn√°vek</p>
          </div>
          <a href="kartao-marketplace.html" class="btn btn-primary hidden lg:flex">
            <i data-lucide="sparkles" class="w-4 h-4"></i>
            Naj√≠t spolupr√°ci
          </a>
        </div>
      </div>
    </section>

    <div class="grid lg:grid-cols-3 gap-6">
      
      <!-- LEV√ù SLOUPEC (2/3) -->
      <div class="lg:col-span-2 space-y-6">
        
        <!-- STATISTIKY P≈òEHLED -->
        <section class="card p-6">
          <h2 class="text-xl font-bold mb-5 flex items-center gap-2">
            <i data-lucide="bar-chart-3" class="w-5 h-5 text-fuchsia-400"></i>
            P≈ôehled v√Ωkonnosti
          </h2>
          <div class="grid md:grid-cols-3 gap-4">
            <div class="stat-card">
              <div class="flex items-center justify-between mb-2">
                <span class="text-sm text-white/60">Celkov√© p≈ô√≠jmy</span>
                <i data-lucide="trending-up" class="w-4 h-4 text-green-400"></i>
              </div>
              <div class="text-3xl font-bold text-green-400" id="totalEarnings">0 Kƒç</div>
              <div class="text-xs text-white/50 mt-1">+15% tento mƒõs√≠c</div>
            </div>
            
            <div class="stat-card">
              <div class="flex items-center justify-between mb-2">
                <span class="text-sm text-white/60">Aktivn√≠ projekty</span>
                <i data-lucide="briefcase" class="w-4 h-4 text-blue-400"></i>
              </div>
              <div class="text-3xl font-bold text-blue-400" id="activeProjects">0</div>
              <div class="text-xs text-white/50 mt-1">3 ƒçek√° na akceptaci</div>
            </div>
            
            <div class="stat-card">
              <div class="flex items-center justify-between mb-2">
                <span class="text-sm text-white/60">Hodnocen√≠</span>
                <i data-lucide="star" class="w-4 h-4 text-amber-400"></i>
              </div>
              <div class="text-3xl font-bold text-amber-400" id="rating">4.8</div>
              <div class="text-xs text-white/50 mt-1">Z 24 recenz√≠</div>
            </div>
          </div>
        </section>

        <!-- M≈ÆJ PROFIL -->
        <section class="card p-6">
          <h2 class="text-xl font-bold mb-5 flex items-center gap-2">
            <i data-lucide="user" class="w-5 h-5 text-fuchsia-400"></i>
            M≈Øj profil
          </h2>
          <form id="creatorProfile" class="space-y-4">
            <div class="grid md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm text-white/70 mb-2">Jm√©no / N√°zev profilu</label>
                <input 
                  name="name" 
                  required 
                  placeholder="Jan Nov√°k" 
                  class="w-full rounded-xl bg-neutral-900 border border-white/10 px-4 py-3 text-white"
                />
              </div>
              <div>
                <label class="block text-sm text-white/70 mb-2">E-mail</label>
                <input 
                  name="email" 
                  type="email" 
                  required 
                  placeholder="jan@example.com" 
                  class="w-full rounded-xl bg-neutral-900 border border-white/10 px-4 py-3 text-white"
                />
              </div>
            </div>
            
            <div class="grid md:grid-cols-2 gap-4">
              <div>
                <label class="block text-sm text-white/70 mb-2">Mƒõsto</label>
                <input 
                  name="city" 
                  placeholder="Praha" 
                  class="w-full rounded-xl bg-neutral-900 border border-white/10 px-4 py-3 text-white"
                />
              </div>
              <div>
                <label class="block text-sm text-white/70 mb-2">Kategorie</label>
                <select 
                  name="category" 
                  class="w-full rounded-xl bg-neutral-900 border border-white/10 px-4 py-3 text-white"
                >
                  <option value="">Vyber kategorii...</option>
                  <option value="beauty">Beauty & Make-up</option>
                  <option value="fitness">Fitness & Zdrav√≠</option>
                  <option value="fashion">M√≥da & Lifestyle</option>
                  <option value="food">J√≠dlo & Va≈ôen√≠</option>
                  <option value="tech">Technologie</option>
                  <option value="gaming">Gaming</option>
                  <option value="travel">Cestov√°n√≠</option>
                  <option value="business">Business</option>
                  <option value="other">Ostatn√≠</option>
                </select>
              </div>
            </div>
            
            <div>
              <label class="block text-sm text-white/70 mb-2">O mnƒõ (bio)</label>
              <textarea 
                name="bio" 
                rows="4"
                placeholder="≈òekni nƒõco o sobƒõ a sv√© tvorbƒõ..."
                class="w-full rounded-xl bg-neutral-900 border border-white/10 p-4 text-white resize-none"
              ></textarea>
            </div>
            
            <div class="flex items-center justify-between pt-2">
              <div class="text-xs text-white/50">
                <i data-lucide="info" class="w-3 h-3 inline"></i>
                Profil je ve≈ôejn√Ω na Marketplace
              </div>
              <button type="submit" class="btn btn-primary">
                <i data-lucide="save" class="w-4 h-4"></i>
                Ulo≈æit profil
              </button>
            </div>
          </form>
        </section>

        <!-- PROPOJEN√ç SOCI√ÅLN√çCH S√çT√ç -->
        <section class="card p-6">
          <h2 class="text-xl font-bold mb-5 flex items-center gap-2">
            <i data-lucide="link" class="w-5 h-5 text-fuchsia-400"></i>
            Propojit soci√°ln√≠ s√≠tƒõ
          </h2>
          <div class="grid md:grid-cols-2 gap-4">
            
            <!-- Instagram -->
            <div class="platform-card p-4 rounded-xl bg-neutral-900/60 border border-white/10">
              <div class="flex items-center gap-3 mb-3">
                <div class="w-10 h-10 rounded-xl bg-gradient-to-tr from-purple-500 to-pink-500 grid place-items-center">
                  <i data-lucide="camera" class="w-5 h-5 text-white"></i>
                </div>
                <div>
                  <div class="font-semibold">Instagram</div>
                  <div class="text-xs text-white/50" id="igStatus">Nep≈ôipojeno</div>
                </div>
              </div>
              <input 
                id="igUrl" 
                placeholder="instagram.com/username" 
                class="w-full rounded-lg bg-neutral-900 border border-white/10 px-3 py-2 text-sm mb-2"
              />
              <button id="connectIG" class="btn btn-primary w-full text-sm">
                <i data-lucide="plug" class="w-3 h-3"></i>
                Propojit
              </button>
              <div class="mt-2 text-center">
                <span class="text-sm font-bold text-purple-400" id="igFollowers">‚Äî</span>
                <span class="text-xs text-white/50 ml-1">followers</span>
              </div>
            </div>

            <!-- TikTok -->
            <div class="platform-card p-4 rounded-xl bg-neutral-900/60 border border-white/10">
              <div class="flex items-center gap-3 mb-3">
                <div class="w-10 h-10 rounded-xl bg-gradient-to-tr from-black to-cyan-400 grid place-items-center">
                  <i data-lucide="music" class="w-5 h-5 text-white"></i>
                </div>
                <div>
                  <div class="font-semibold">TikTok</div>
                  <div class="text-xs text-white/50" id="ttStatus">Nep≈ôipojeno</div>
                </div>
              </div>
              <input 
                id="ttUrl" 
                placeholder="tiktok.com/@username" 
                class="w-full rounded-lg bg-neutral-900 border border-white/10 px-3 py-2 text-sm mb-2"
              />
              <button id="connectTT" class="btn btn-primary w-full text-sm">
                <i data-lucide="plug" class="w-3 h-3"></i>
                Propojit
              </button>
              <div class="mt-2 text-center">
                <span class="text-sm font-bold text-cyan-400" id="ttFollowers">‚Äî</span>
                <span class="text-xs text-white/50 ml-1">followers</span>
              </div>
            </div>

            <!-- YouTube -->
            <div class="platform-card p-4 rounded-xl bg-neutral-900/60 border border-white/10">
              <div class="flex items-center gap-3 mb-3">
                <div class="w-10 h-10 rounded-xl bg-gradient-to-tr from-red-600 to-red-400 grid place-items-center">
                  <i data-lucide="play" class="w-5 h-5 text-white"></i>
                </div>
                <div>
                  <div class="font-semibold">YouTube</div>
                  <div class="text-xs text-white/50" id="ytStatus">Nep≈ôipojeno</div>
                </div>
              </div>
              <input 
                id="ytUrl" 
                placeholder="youtube.com/@channel" 
                class="w-full rounded-lg bg-neutral-900 border border-white/10 px-3 py-2 text-sm mb-2"
              />
              <button id="connectYT" class="btn btn-primary w-full text-sm">
                <i data-lucide="plug" class="w-3 h-3"></i>
                Propojit
              </button>
              <div class="mt-2 text-center">
                <span class="text-sm font-bold text-red-400" id="ytFollowers">‚Äî</span>
                <span class="text-xs text-white/50 ml-1">subscribers</span>
              </div>
            </div>

            <!-- Facebook -->
            <div class="platform-card p-4 rounded-xl bg-neutral-900/60 border border-white/10">
              <div class="flex items-center gap-3 mb-3">
                <div class="w-10 h-10 rounded-xl bg-gradient-to-tr from-blue-600 to-blue-400 grid place-items-center">
                  <i data-lucide="facebook" class="w-5 h-5 text-white"></i>
                </div>
                <div>
                  <div class="font-semibold">Facebook</div>
                  <div class="text-xs text-white/50" id="fbStatus">Nep≈ôipojeno</div>
                </div>
              </div>
              <input 
                id="fbUrl" 
                placeholder="facebook.com/page" 
                class="w-full rounded-lg bg-neutral-900 border border-white/10 px-3 py-2 text-sm mb-2"
              />
              <button id="connectFB" class="btn btn-primary w-full text-sm">
                <i data-lucide="plug" class="w-3 h-3"></i>
                Propojit
              </button>
              <div class="mt-2 text-center">
                <span class="text-sm font-bold text-blue-400" id="fbFollowers">‚Äî</span>
                <span class="text-xs text-white/50 ml-1">followers</span>
              </div>
            </div>

          </div>
          <div class="mt-4 p-3 rounded-lg bg-amber-500/10 border border-amber-500/20 text-sm text-amber-400">
            <i data-lucide="info" class="w-4 h-4 inline"></i>
            Ve skuteƒçnosti by zde bylo OAuth propojen√≠. Nyn√≠ simulujeme data.
          </div>
        </section>

      </div>

      <!-- PRAV√ù SLOUPEC (1/3) -->
      <div class="space-y-6">
        
        <!-- RYCHL√â AKCE -->
        <section class="card p-5">
          <h3 class="font-semibold mb-4 flex items-center gap-2">
            <i data-lucide="zap" class="w-4 h-4 text-amber-400"></i>
            Rychl√© akce
          </h3>
          <div class="space-y-2">
            <a href="earnings-management.html" class="btn btn-outline w-full justify-center">
              <i data-lucide="wallet" class="w-4 h-4"></i>
              Vybrat pen√≠ze
            </a>
            <a href="kartao-marketplace.html" class="btn btn-outline w-full justify-center">
              <i data-lucide="search" class="w-4 h-4"></i>
              Naj√≠t firmu
            </a>
            <a href="chat.html" class="btn btn-outline w-full justify-center">
              <i data-lucide="message-square" class="w-4 h-4"></i>
              Nov√© zpr√°vy
            </a>
          </div>
        </section>

        <!-- P≈ò√çJMY -->
        <section class="card p-5">
          <h3 class="font-semibold mb-4 flex items-center gap-2">
            <i data-lucide="dollar-sign" class="w-4 h-4 text-green-400"></i>
            Moje p≈ô√≠jmy
          </h3>
          <div class="space-y-3">
            <div class="p-3 rounded-xl bg-green-500/10 border border-green-500/20">
              <div class="text-xs text-white/60 mb-1">K dispozici</div>
              <div class="text-2xl font-bold text-green-400" id="pendingEarnings">0 Kƒç</div>
            </div>
            <div class="p-3 rounded-xl bg-blue-500/10 border border-blue-500/20">
              <div class="text-xs text-white/60 mb-1">V escrow</div>
              <div class="text-xl font-bold text-blue-400" id="escrowAmount">0 Kƒç</div>
            </div>
          </div>
          <button id="withdrawBtn" class="btn btn-primary w-full mt-4" disabled>
            <i data-lucide="download" class="w-4 h-4"></i>
            Vybrat pen√≠ze
          </button>
          <div class="text-xs text-white/50 text-center mt-2">Min. v√Ωbƒõr 100 Kƒç</div>
        </section>

        <!-- AKTIVN√ç OBJEDN√ÅVKY -->
        <section class="card p-5">
          <h3 class="font-semibold mb-4 flex items-center gap-2">
            <i data-lucide="list-checks" class="w-4 h-4 text-fuchsia-400"></i>
            Aktivn√≠ objedn√°vky
          </h3>
          <div id="activeOrders" class="space-y-3">
            <div class="text-center py-6 text-white/40 text-sm">
              <i data-lucide="inbox" class="w-8 h-8 mx-auto mb-2 opacity-50"></i>
              Naƒç√≠t√°n√≠ objedn√°vek...
            </div>
          </div>
          <a href="order-management.html" class="block text-center text-sm text-fuchsia-400 hover:text-fuchsia-300 mt-4">
            Zobrazit v≈°echny ‚Üí
          </a>
        </section>

        <!-- NOTIFIKACE -->
        <section class="card p-5">
          <h3 class="font-semibold mb-4 flex items-center gap-2">
            <i data-lucide="bell" class="w-4 h-4 text-amber-400"></i>
            Notifikace
          </h3>
          <div class="space-y-2 text-sm">
            <div class="p-2 rounded-lg bg-neutral-900/60 border border-white/10">
              <div class="flex items-start gap-2">
                <i data-lucide="check-circle" class="w-4 h-4 text-green-400 mt-0.5"></i>
                <div class="flex-1">
                  <div class="text-white/90">Platba p≈ôijata</div>
                  <div class="text-xs text-white/50">P≈ôed 2 hodinami</div>
                </div>
              </div>
            </div>
            <div class="p-2 rounded-lg bg-neutral-900/60 border border-white/10">
              <div class="flex items-start gap-2">
                <i data-lucide="message-circle" class="w-4 h-4 text-blue-400 mt-0.5"></i>
                <div class="flex-1">
                  <div class="text-white/90">Nov√° zpr√°va od firmy</div>
                  <div class="text-xs text-white/50">Vƒçera</div>
                </div>
              </div>
            </div>
          </div>
        </section>

      </div>

    </div>
  </main>

  <!-- Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="supabase-config.js"></script>
  <script src="supabase-init.js"></script>
  <script src="supabase-compatibility.js"></script>
  <script src="auth-supabase.js"></script>
  <script src="auth-header.js"></script>
  <script src="credits-system-supabase.js"></script>
  <script src="credits-header.js"></script>

  <script>
    // Auth check a naƒçten√≠ dat
    window.addEventListener('load', function() {
      if (!window.supabaseClient && !window.sb) {
        console.error('‚ùå Supabase nen√≠ naƒçten√Ω!');
        return;
      }

      const sb = window.supabaseClient || window.sb;
      let currentUser = null;

      kartaoAuth.onAuthStateChanged(async (user) => {
        if (!user) {
          console.log('‚ö†Ô∏è U≈æivatel nen√≠ p≈ôihl√°≈°en, redirect na login');
          window.location.href = 'login.html';
          return;
        }

        currentUser = user;
        console.log('‚úÖ P≈ôihl√°≈°en jako:', user.email);

        // Naƒçti profil
        loadProfile(user);
        
        // Naƒçti statistiky
        loadStats(user.id);
        
        // Naƒçti objedn√°vky
        loadOrders(user.id);
      });

      // Naƒçten√≠ profilu
      async function loadProfile(user) {
        try {
          const doc = await db.collection('creators').doc(user.uid).get();
          if (doc.exists) {
            const data = doc.data();
            document.querySelector('[name="name"]').value = data.name || '';
            document.querySelector('[name="email"]').value = data.email || user.email;
            document.querySelector('[name="city"]').value = data.city || '';
            document.querySelector('[name="category"]').value = data.category || '';
            document.querySelector('[name="bio"]').value = data.bio || '';
            document.getElementById('userName').textContent = data.name || 'Tv≈Ørƒçe';

            // Naƒçti metriky
            if (data.metrics) {
              updateSocialMetrics(data.metrics);
            }
          } else {
            // Nov√Ω u≈æivatel
            document.querySelector('[name="email"]').value = user.email;
            document.getElementById('userName').textContent = user.displayName || 'Tv≈Ørƒçe';
          }
        } catch (error) {
          console.error('Chyba naƒç√≠t√°n√≠ profilu:', error);
        }
      }

      // Ulo≈æen√≠ profilu
      document.getElementById('creatorProfile').addEventListener('submit', async (e) => {
        e.preventDefault();
        if (!currentUser) return;

        const formData = new FormData(e.target);
        const profileData = {
          userId: currentUser.uid,
          email: formData.get('email'),
          name: formData.get('name'),
          city: formData.get('city'),
          category: formData.get('category'),
          bio: formData.get('bio'),
          role: 'tvurce',
          updatedAt: new Date().toISOString()
        };

        try {
          await db.collection('creators').doc(currentUser.uid).set(profileData, { merge: true });
          alert('‚úÖ Profil ulo≈æen!');
        } catch (error) {
          console.error('Chyba ukl√°d√°n√≠:', error);
          alert('‚ùå Chyba p≈ôi ukl√°d√°n√≠ profilu');
        }
      });

      // Propojen√≠ Instagram
      document.getElementById('connectIG').addEventListener('click', async () => {
        const url = document.getElementById('igUrl').value.trim();
        if (!url) {
          alert('Zadej URL profilu');
          return;
        }

        // Simulace - v re√°lu by zde bylo OAuth
        const followers = Math.floor(Math.random() * 100000) + 5000;
        
        try {
          await db.collection('creators').doc(currentUser.uid).set({
            'metrics.instagram': {
              username: extractUsername(url),
              followers: followers,
              connected: true,
              connectedAt: new Date().toISOString()
            }
          }, { merge: true });

          document.getElementById('igFollowers').textContent = formatNumber(followers);
          document.getElementById('igStatus').textContent = 'P≈ôipojeno ‚úì';
          document.getElementById('igStatus').classList.add('text-green-400');
          alert(`‚úÖ Instagram p≈ôipojen! Followers: ${formatNumber(followers)}`);
        } catch (error) {
          console.error('Chyba propojen√≠ IG:', error);
        }
      });

      // Propojen√≠ TikTok
      document.getElementById('connectTT').addEventListener('click', async () => {
        const url = document.getElementById('ttUrl').value.trim();
        if (!url) {
          alert('Zadej URL profilu');
          return;
        }

        const followers = Math.floor(Math.random() * 200000) + 10000;
        
        try {
          await db.collection('creators').doc(currentUser.uid).set({
            'metrics.tiktok': {
              username: extractUsername(url),
              followers: followers,
              connected: true,
              connectedAt: new Date().toISOString()
            }
          }, { merge: true });

          document.getElementById('ttFollowers').textContent = formatNumber(followers);
          document.getElementById('ttStatus').textContent = 'P≈ôipojeno ‚úì';
          document.getElementById('ttStatus').classList.add('text-green-400');
          alert(`‚úÖ TikTok p≈ôipojen! Followers: ${formatNumber(followers)}`);
        } catch (error) {
          console.error('Chyba propojen√≠ TT:', error);
        }
      });

      // Propojen√≠ YouTube
      document.getElementById('connectYT').addEventListener('click', async () => {
        const url = document.getElementById('ytUrl').value.trim();
        if (!url) {
          alert('Zadej URL kan√°lu');
          return;
        }

        const followers = Math.floor(Math.random() * 150000) + 2000;
        
        try {
          await db.collection('creators').doc(currentUser.uid).set({
            'metrics.youtube': {
              username: extractUsername(url),
              followers: followers,
              connected: true,
              connectedAt: new Date().toISOString()
            }
          }, { merge: true });

          document.getElementById('ytFollowers').textContent = formatNumber(followers);
          document.getElementById('ytStatus').textContent = 'P≈ôipojeno ‚úì';
          document.getElementById('ytStatus').classList.add('text-green-400');
          alert(`‚úÖ YouTube p≈ôipojen! Subscribers: ${formatNumber(followers)}`);
        } catch (error) {
          console.error('Chyba propojen√≠ YT:', error);
        }
      });

      // Propojen√≠ Facebook
      document.getElementById('connectFB').addEventListener('click', async () => {
        const url = document.getElementById('fbUrl').value.trim();
        if (!url) {
          alert('Zadej URL str√°nky');
          return;
        }

        const followers = Math.floor(Math.random() * 80000) + 3000;
        
        try {
          await db.collection('creators').doc(currentUser.uid).set({
            'metrics.facebook': {
              username: extractUsername(url),
              followers: followers,
              connected: true,
              connectedAt: new Date().toISOString()
            }
          }, { merge: true });

          document.getElementById('fbFollowers').textContent = formatNumber(followers);
          document.getElementById('fbStatus').textContent = 'P≈ôipojeno ‚úì';
          document.getElementById('fbStatus').classList.add('text-green-400');
          alert(`‚úÖ Facebook p≈ôipojen! Followers: ${formatNumber(followers)}`);
        } catch (error) {
          console.error('Chyba propojen√≠ FB:', error);
        }
      });

      // Naƒç√≠st statistiky
      async function loadStats(userId) {
        try {
          // Simulace dat
          document.getElementById('totalEarnings').textContent = '12 450 Kƒç';
          document.getElementById('pendingEarnings').textContent = '3 200 Kƒç';
          document.getElementById('escrowAmount').textContent = '4 500 Kƒç';
          document.getElementById('activeProjects').textContent = '5';
          document.getElementById('rating').textContent = '4.8';

          // Povolit v√Ωbƒõr penƒõz pokud je ƒç√°stka
          const withdrawBtn = document.getElementById('withdrawBtn');
          withdrawBtn.disabled = false;
        } catch (error) {
          console.error('Chyba naƒç√≠t√°n√≠ stats:', error);
        }
      }

      // Naƒç√≠st objedn√°vky
      async function loadOrders(userId) {
        const container = document.getElementById('activeOrders');
        
        // Simulace objedn√°vek
        const mockOrders = [
          { id: 1, company: 'Nike CZ', status: 'active', amount: 15000, deadline: '2025-11-25' },
          { id: 2, company: 'Adidas', status: 'pending', amount: 8500, deadline: '2025-11-30' },
          { id: 3, company: 'Coca-Cola', status: 'completed', amount: 12000, deadline: '2025-11-20' }
        ];

        container.innerHTML = mockOrders.map(order => `
          <div class="p-3 rounded-xl bg-neutral-900/60 border border-white/10">
            <div class="flex items-center justify-between mb-2">
              <div class="font-semibold text-sm">${order.company}</div>
              <span class="order-badge badge-${order.status}">
                ${order.status === 'active' ? 'Aktivn√≠' : order.status === 'pending' ? 'ƒåek√°' : 'Hotovo'}
              </span>
            </div>
            <div class="text-xs text-white/60">ƒå√°stka: <span class="text-white font-semibold">${formatNumber(order.amount)} Kƒç</span></div>
            <div class="text-xs text-white/50">Deadline: ${order.deadline}</div>
          </div>
        `).join('');
      }

      // Update social metrics
      function updateSocialMetrics(metrics) {
        if (metrics.instagram?.connected) {
          document.getElementById('igFollowers').textContent = formatNumber(metrics.instagram.followers);
          document.getElementById('igStatus').textContent = 'P≈ôipojeno ‚úì';
          document.getElementById('igStatus').classList.add('text-green-400');
        }
        if (metrics.tiktok?.connected) {
          document.getElementById('ttFollowers').textContent = formatNumber(metrics.tiktok.followers);
          document.getElementById('ttStatus').textContent = 'P≈ôipojeno ‚úì';
          document.getElementById('ttStatus').classList.add('text-green-400');
        }
        if (metrics.youtube?.connected) {
          document.getElementById('ytFollowers').textContent = formatNumber(metrics.youtube.followers);
          document.getElementById('ytStatus').textContent = 'P≈ôipojeno ‚úì';
          document.getElementById('ytStatus').classList.add('text-green-400');
        }
        if (metrics.facebook?.connected) {
          document.getElementById('fbFollowers').textContent = formatNumber(metrics.facebook.followers);
          document.getElementById('fbStatus').textContent = 'P≈ôipojeno ‚úì';
          document.getElementById('fbStatus').classList.add('text-green-400');
        }
      }

      // Helper funkce
      function extractUsername(url) {
        const match = url.match(/[/@]([a-zA-Z0-9_.]+)(?:\?|$|\/)/);
        return match ? match[1] : url.split('/').pop() || 'unknown';
      }

      function formatNumber(num) {
        if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
        if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
        return num.toString();
      }

      // Odhl√°≈°en√≠
      document.getElementById('logout').addEventListener('click', async () => {
        try {
          await auth.signOut();
          window.location.href = 'index.html';
        } catch (error) {
          console.error('Chyba odhl√°≈°en√≠:', error);
        }
      });

      // Notifikace
      document.getElementById('notificationBtn')?.addEventListener('click', () => {
        alert('üì¨ Funkce notifikac√≠ bude brzy p≈ôid√°na!');
      });

      // V√Ωbƒõr penƒõz
      document.getElementById('withdrawBtn')?.addEventListener('click', () => {
        alert('üí∞ Funkce v√Ωbƒõru penƒõz bude brzy p≈ôid√°na!');
      });

    });

    // Inicializace ikon
    document.addEventListener('DOMContentLoaded', () => {
      if (window.lucide) {
        lucide.createIcons();
      }
    });
  </script>
</body>
</html>

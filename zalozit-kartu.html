<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kartao.cz ‚Äì Zalo≈æit kartu</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üí≥</text></svg>">

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            neutral: tailwind.colors.neutral,
            fuchsia: tailwind.colors.fuchsia,
            amber: tailwind.colors.amber,
            sky: tailwind.colors.sky,
            emerald: tailwind.colors.emerald,
          },
          boxShadow: {
            soft: "0 18px 45px rgba(0,0,0,0.45)",
          },
        },
      },
    };
  </script>

  <!-- Lucide ikony ‚Äì UMD verze -->
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>

  <style>
    body {
      background: radial-gradient(circle at top, #1f2937 0, #020617 45%, #000 100%);
    }
    .glass-panel {
      background:
        radial-gradient(circle at top left, rgba(248, 250, 252, 0.08), transparent),
        radial-gradient(circle at bottom right, rgba(217, 70, 239, 0.08), transparent);
      backdrop-filter: blur(24px);
    }
  </style>
</head>

<body class="min-h-screen text-white bg-neutral-950/95">
  <div class="min-h-screen flex flex-col">

    <!-- HEADER -->
    <header class="sticky top-0 z-40 backdrop-blur supports-[backdrop-filter]:bg-neutral-950/70 border-b border-white/10">
      <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between gap-4">
        <a href="index.html" class="flex items-center gap-3">
          <div class="w-9 h-9 rounded-2xl bg-gradient-to-tr from-fuchsia-500 to-amber-400 grid place-items-center shadow-soft">
            <i data-lucide="crown" class="w-5 h-5"></i>
          </div>
          <div>
            <div class="font-extrabold tracking-tight text-lg">Kartao.cz</div>
            <div class="text-xs text-white/60 -mt-0.5">S√≠≈• influencer≈Ø a tv≈Ørc≈Ø</div>
          </div>
        </a>

        <div class="flex items-center gap-2 text-sm">
          <!-- tlaƒç√≠tko pro p≈ôihl√°≈°en√≠ (nep≈ôihl√°≈°en√Ω) -->
          <button
            data-show-when="loggedout"
            onclick="window.location.href='login.html'"
            class="hidden md:inline-flex px-3 py-1.5 rounded-full border border-white/20 text-white/80 hover:text-white hover:border-white/40">
            P≈ôihl√°sit se
          </button>

          <!-- tlaƒç√≠tko pro odhl√°≈°en√≠ (p≈ôihl√°≈°en√Ω) -->
          <button
            data-show-when="loggedin"
            class="hidden inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/10 border border-white/20 hover:bg-white/15">
            <i data-lucide="log-out" class="w-4 h-4"></i>
            <span>Odhl√°sit se</span>
          </button>
        </div>
      </div>
    </header>

    <!-- MAIN -->
    <main class="flex-1">
      <section class="max-w-3xl mx-auto px-4 py-8 md:py-10">
        <!-- Breadcrumbs -->
        <nav class="mb-4 text-xs text-white/50 flex items-center gap-1">
          <a href="index.html" class="hover:text-white">Dom≈Ø</a>
          <span>/</span>
          <span class="text-white/70">Zalo≈æit kartu</span>
        </nav>

        <!-- Nadpis -->
        <section class="mb-10">
          <div class="inline-flex items-center gap-2 rounded-full border border-fuchsia-500/40 bg-fuchsia-500/10 px-3 py-1 text-xs text-fuchsia-100 mb-4">
            <span class="w-1.5 h-1.5 rounded-full bg-emerald-400 animate-pulse"></span>
            <span>Pro p≈ôihl√°≈°en√© tv≈Ørce</span>
          </div>
          <h1 class="text-3xl md:text-4xl font-extrabold tracking-tight mb-3 flex flex-wrap items-center gap-3">
            Zalo≈æit kartu tv≈Ørce
            <span class="text-sm font-semibold px-2 py-1 rounded-full bg-emerald-500/15 text-emerald-300 border border-emerald-400/40">Zdarma</span>
          </h1>
          <p class="text-white/70 max-w-2xl text-sm md:text-base">
            Vypl≈à z√°kladn√≠ informace o sobƒõ a sv√Ωch s√≠t√≠ch. Kartu m≈Ø≈æe≈° kdykoliv upravit a pozdƒõji p≈ôidat
            detailnƒõj≈°√≠ statistiky, cen√≠k i speci√°ln√≠ nab√≠dky pro znaƒçky.
          </p>
        </section>

        <!-- FORMUL√Å≈ò -->
        <form id="cardForm" class="glass-panel rounded-2xl border border-white/10 p-4 md:p-6 space-y-5">
          <!-- Z√ÅKLADN√ç √öDAJE -->
          <div>
            <h2 class="text-sm font-semibold mb-3 flex items-center gap-2">
              <i data-lucide="user" class="w-4 h-4 text-amber-300"></i>
              Z√°kladn√≠ √∫daje
            </h2>
            <div class="grid md:grid-cols-2 gap-3">
              <div>
                <label class="block text-xs text-white/60 mb-1">Jm√©no a p≈ô√≠jmen√≠ *</label>
                <input id="name" required class="w-full rounded-xl bg-neutral-900 border border-white/15 px-3 py-2 text-sm" placeholder="Jan Nov√°k" />
              </div>
              <div>
                <label class="block text-xs text-white/60 mb-1">P≈ôezd√≠vka / handle *</label>
                <input id="handle" required class="w-full rounded-xl bg-neutral-900 border border-white/15 px-3 py-2 text-sm" placeholder="@janincontent" />
              </div>
              <div>
                <label class="block text-xs text-white/60 mb-1">E-mail (nezve≈ôej≈àuje se) *</label>
                <input id="email" type="email" required class="w-full rounded-xl bg-neutral-900 border border-white/15 px-3 py-2 text-sm" placeholder="nap≈ô. ty@domena.cz" />
              </div>
              <div>
                <label class="block text-xs text-white/60 mb-1">Mƒõsto / region *</label>
                <input id="city" required class="w-full rounded-xl bg-neutral-900 border border-white/15 px-3 py-2 text-sm" placeholder="Praha, Brno, Ostrava‚Ä¶" />
              </div>

              <div>
                <label class="block text-xs text-white/60 mb-1">Vƒõk / rok narozen√≠ *</label>
                <input id="age" required class="w-full rounded-xl bg-neutral-900 border border-white/15 px-3 py-2 text-sm" placeholder="nap≈ô. 1999 nebo 24" />
              </div>

              <div>
                <label class="block text-xs text-white/60 mb-1">Kategorie *</label>
                <select id="category" required class="w-full rounded-xl bg-neutral-900 border border-white/15 px-3 py-2 text-sm">
                  <option value="">Vyberte kategorii</option>
                  <option>Beauty</option>
                  <option>Fitness</option>
                  <option>Travel</option>
                  <option>Gaming</option>
                  <option>Lifestyle</option>
                  <option>Food</option>
                  <option>Rodina & dƒõti</option>
                  <option>Business & finance</option>
                  <option>Jin√©</option>
                </select>
              </div>
            </div>

            <!-- FOTOGRAFIE -->
            <div class="grid md:grid-cols-2 gap-4 mt-4">
              <div>
                <label class="block text-xs text-white/60 mb-2">Profilov√° fotka ‚Äì avatar *</label>
                <div class="space-y-3">
                  <div class="relative group">
                    <input type="file" id="avatarFile" accept="image/*" class="hidden" />
                    <label for="avatarFile" class="block cursor-pointer">
                      <div id="avatarPreview" class="w-full aspect-square rounded-2xl bg-neutral-900 border-2 border-dashed border-white/20 hover:border-amber-400/50 transition flex flex-col items-center justify-center overflow-hidden">
                        <i data-lucide="upload" class="w-8 h-8 text-white/40 mb-2"></i>
                        <span class="text-xs text-white/60">Kliknƒõte pro nahr√°n√≠</span>
                        <span class="text-[11px] text-white/40 mt-1">Doporuƒçeno 800√ó800 px</span>
                      </div>
                    </label>
                  </div>
                  <input id="avatar" type="url" class="w-full rounded-xl bg-neutral-900 border border-white/15 px-3 py-2 text-xs" placeholder="Nebo vlo≈æte URL obr√°zku" />
                </div>
              </div>
              
              <div>             
                <label class="block text-xs text-white/60 mb-2">√övodn√≠ foto (cover) *</label>
                <div class="space-y-3">
                  <div class="relative group">
                    <input type="file" id="coverFile" accept="image/*" class="hidden" />
                    <label for="coverFile" class="block cursor-pointer">
                      <div id="coverPreview" class="w-full aspect-[2.5/1] rounded-2xl bg-neutral-900 border-2 border-dashed border-white/20 hover:border-fuchsia-400/50 transition flex flex-col items-center justify-center overflow-hidden">
                        <i data-lucide="image" class="w-8 h-8 text-white/40 mb-2"></i>
                        <span class="text-xs text-white/60">Kliknƒõte pro nahr√°n√≠</span>
                        <span class="text-[11px] text-white/40 mt-1">Doporuƒçeno 1600√ó600 px</span>
                      </div>
                    </label>
                  </div>
                  <input id="cover" type="url" class="w-full rounded-xl bg-neutral-900 border border-white/15 px-3 py-2 text-xs" placeholder="Nebo vlo≈æte URL obr√°zku" />
                </div>
              </div>
            </div>
          </div>

          <!-- POPIS / BIO -->
          <div>
            <h2 class="text-sm font-semibold mb-3 flex items-center gap-2">
              <i data-lucide="align-left" class="w-4 h-4 text-amber-300"></i>
              Kr√°tk√© p≈ôedstaven√≠
            </h2>
            <label class="block text-xs text-white/60 mb-1">Bio ‚Äì struƒçnƒõ o v√°s *</label>
            <textarea id="bio" required rows="4" class="w-full rounded-xl bg-neutral-900 border border-white/15 px-3 py-2 text-sm" placeholder="Kdo jste, jak√Ω obsah tvo≈ô√≠te, s jak√Ωmi znaƒçkami jste u≈æ spolupracovali‚Ä¶"></textarea>
          </div>

          <!-- PLATFORMY -->
          <div>
            <h2 class="text-sm font-semibold mb-3 flex items-center gap-2">
              <i data-lucide="grid-2x2-check" class="w-4 h-4 text-amber-300"></i>
              Soci√°ln√≠ s√≠tƒõ
            </h2>
            <p class="text-xs text-white/60 mb-3">Vypl≈àte jen ty platformy, kde jste aktivn√≠. Ostatn√≠ m≈Ø≈æete nechat pr√°zdn√©.</p>

            <div class="space-y-3">
              <!-- Instagram -->
              <div class="grid md:grid-cols-[minmax(0,_1.4fr)_minmax(0,_0.8fr)_minmax(0,_0.8fr)] gap-3 items-end">
                <div>
                  <label class="block text-xs text-white/60 mb-1">Instagram ‚Äì profil (URL)</label>
                  <input id="instagramUrl" class="w-full rounded-xl bg-neutral-900 border border-white/15 px-3 py-2 text-sm" placeholder="https://instagram.com/vasprofil" />
                </div>
                <div>
                  <label class="block text-xs text-white/60 mb-1">Sleduj√≠c√≠ (odhad)</label>
                  <input id="instagramFollowers" type="number" min="0" class="w-full rounded-xl bg-neutral-900 border border-white/15 px-3 py-2 text-sm" placeholder="nap≈ô. 25300" />
                </div>
                <div>
                  <label class="block text-xs text-white/60 mb-1">Engagement (%)</label>
                  <input id="instagramEngagement" type="number" min="0" step="0.1" class="w-full rounded-xl bg-neutral-900 border border-white/15 px-3 py-2 text-sm" placeholder="nap≈ô. 4.2" />
                </div>
              </div>

              <!-- TikTok -->
              <div class="grid md:grid-cols-[minmax(0,_1.4fr)_minmax(0,_0.8fr)_minmax(0,_0.8fr)] gap-3 items-end">
                <div>
                  <label class="block text-xs text-white/60 mb-1">TikTok ‚Äì profil (URL)</label>
                  <input id="tiktokUrl" class="w-full rounded-xl bg-neutral-900 border border-white/15 px-3 py-2 text-sm" placeholder="https://tiktok.com/@vasprofil" />
                </div>
                <div>
                  <label class="block text-xs text-white/60 mb-1">Sleduj√≠c√≠ (odhad)</label>
                  <input id="tiktokFollowers" type="number" min="0" class="w-full rounded-xl bg-neutral-900 border border-white/15 px-3 py-2 text-sm" placeholder="nap≈ô. 48900" />
                </div>
                <div>
                  <label class="block text-xs text-white/60 mb-1">Pr≈Ømƒõrn√Ω dosah / video</label>
                  <input id="tiktokReach" type="number" min="0" class="w-full rounded-xl bg-neutral-900 border border-white/15 px-3 py-2 text-sm" placeholder="nap≈ô. 120000" />
                </div>
              </div>

              <!-- YouTube -->
              <div class="grid md:grid-cols-[minmax(0,_1.4fr)_minmax(0,_0.8fr)] gap-3 items-end">
                <div>
                  <label class="block text-xs text-white/60 mb-1">YouTube ‚Äì kan√°l (URL)</label>
                  <input id="youtubeUrl" class="w-full rounded-xl bg-neutral-900 border border-white/15 px-3 py-2 text-sm" placeholder="https://youtube.com/@vasprofil" />
                </div>
                <div>
                  <label class="block text-xs text-white/60 mb-1">Odbƒõratel√© (odhad)</label>
                  <input id="youtubeFollowers" type="number" min="0" class="w-full rounded-xl bg-neutral-900 border border-white/15 px-3 py-2 text-sm" placeholder="nap≈ô. 15000" />
                </div>
              </div>

              <!-- Facebook -->
              <div class="grid md:grid-cols-[minmax(0,_1.4fr)_minmax(0,_0.8fr)] gap-3 items-end">
                <div>
                  <label class="block text-xs text-white/60 mb-1">Facebook ‚Äì str√°nka (URL)</label>
                  <input id="facebookUrl" class="w-full rounded-xl bg-neutral-900 border border-white/15 px-3 py-2 text-sm" placeholder="https://facebook.com/vasprofil" />
                </div>
                <div>
                  <label class="block text-xs text-white/60 mb-1">Sleduj√≠c√≠ (odhad)</label>
                  <input id="facebookFollowers" type="number" min="0" class="w-full rounded-xl bg-neutral-900 border border-white/15 px-3 py-2 text-sm" placeholder="nap≈ô. 8000" />
                </div>
              </div>

              <!-- Pinterest -->
              <div class="grid md:grid-cols-[minmax(0,_1.4fr)_minmax(0,_0.8fr)] gap-3 items-end">
                <div>
                  <label class="block text-xs text-white/60 mb-1">Pinterest ‚Äì profil (URL)</label>
                  <input id="pinterestUrl" class="w-full rounded-xl bg-neutral-900 border border-white/15 px-3 py-2 text-sm" placeholder="https://pinterest.com/vasprofil" />
                </div>
                <div>
                  <label class="block text-xs text-white/60 mb-1">Sleduj√≠c√≠ (odhad)</label>
                  <input id="pinterestFollowers" type="number" min="0" class="w-full rounded-xl bg-neutral-900 border border-white/15 px-3 py-2 text-sm" placeholder="nap≈ô. 12000" />
                </div>
              </div>
            </div>
          </div>

          <!-- CEN√çK -->
          <div>
            <h2 class="text-sm font-semibold mb-3 flex items-center gap-2">
              <i data-lucide="hand-coins" class="w-4 h-4 text-amber-300"></i>
              Cen√≠k spoluprac√≠ (orientaƒçnƒõ)
            </h2>
            <div class="grid md:grid-cols-3 gap-3">
              <div>
                <label class="block text-xs text-white/60 mb-1">Reels / kr√°tk√© video od (Kƒç)</label>
                <input id="priceReels" type="number" min="0" class="w-full rounded-xl bg-neutral-900 border border-white/15 px-3 py-2 text-sm" placeholder="nap≈ô. 6000" />
              </div>
              <div>
                <label class="block text-xs text-white/60 mb-1">Stories bal√≠ƒçek od (Kƒç)</label>
                <input id="priceStories" type="number" min="0" class="w-full rounded-xl bg-neutral-900 border border-white/15 px-3 py-2 text-sm" placeholder="nap≈ô. 3500" />
              </div>
              <div>
                <label class="block text-xs text-white/60 mb-1">Individu√°ln√≠ bal√≠ƒçek</label>
                <input id="priceCustom" class="w-full rounded-xl bg-neutral-900 border border-white/15 px-3 py-2 text-sm" placeholder="nap≈ô. podle domluvy" />
              </div>
            </div>
          </div>

          <!-- INFORMACE PRO ZNAƒåKY -->
          <div>
            <h2 class="text-sm font-semibold mb-3 flex items-center gap-2">
              <i data-lucide="briefcase" class="w-4 h-4 text-amber-300"></i>
              Informace pro znaƒçky
            </h2>
            <label class="block text-xs text-white/60 mb-1">Jak√© typy spoluprac√≠ preferujete? Co nedƒõl√°te?</label>
            <textarea id="brandInfo" rows="4" class="w-full rounded-xl bg-neutral-900 border border-white/15 px-3 py-2 text-sm" placeholder="Nap≈ô. dlouhodob√© spolupr√°ce, ambasadorstv√≠, produktov√° videa‚Ä¶ Nedƒõl√°m alkohol, hazard, konkurenƒçn√≠ znaƒçky X."></textarea>
          </div>

          <!-- SOUHLAS + ODESL√ÅN√ç -->
          <div class="space-y-3">
            <label class="flex items-start gap-2 text-xs text-white/60">
              <input id="agree" type="checkbox" class="mt-1 rounded border-white/30 bg-neutral-900" required />
              <span>
                Souhlas√≠m se zpracov√°n√≠m uveden√Ωch √∫daj≈Ø pro √∫ƒçely zprost≈ôedkov√°n√≠ spoluprac√≠ p≈ôes Kartao.cz.
                Podrobnosti najdete v dokumentech
                <a href="ochrana-osobnich-udaju.html" class="underline hover:text-white">Ochrana osobn√≠ch √∫daj≈Ø</a>
                a
                <a href="obchodni-podminky.html" class="underline hover:text-white">Obchodn√≠ podm√≠nky</a>.
              </span>
            </label>

            <div id="formMessage" class="hidden text-xs"></div>

            <button type="submit" class="w-full inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl bg-gradient-to-r from-fuchsia-500 to-amber-400 text-neutral-950 text-sm font-semibold shadow-soft">
              <i data-lucide="sparkles" class="w-4 h-4"></i>
              Ulo≈æit kartu a pokraƒçovat
            </button>
            
            <!-- Tlaƒç√≠tko pro smaz√°n√≠ draftu -->
            <button type="button" id="clearDraft" class="w-full mt-2 inline-flex items-center justify-center gap-2 px-3 py-2 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 text-white/70 hover:text-white text-xs font-medium transition">
              <i data-lucide="trash-2" class="w-3 h-3"></i>
              Smazat ulo≈æen√° data a zaƒç√≠t znovu
            </button>
          </div>
        </form>
      </section>
    </main>

    <!-- FOOTER -->
    <footer class="border-t border-white/10 text-center text-white/60 py-6 text-xs mt-4">
      <div class="flex flex-col md:flex-row items-center justify-center gap-3 mb-2">
        <a href="ochrana-osobnich-udaju.html" class="hover:text-white">Ochrana osobn√≠ch √∫daj≈Ø</a>
        <span class="hidden md:block">‚Ä¢</span>
        <a href="obchodni-podminky.html" class="hover:text-white">Obchodn√≠ podm√≠nky</a>
        <span class="hidden md:block">‚Ä¢</span>
        <a href="kontakt.html" class="hover:text-white">Kontakt</a>
      </div>
      <div class="flex items-center justify-center gap-2">
        <span>¬© 2025 Kartao.cz ‚Äì S√≠≈• influencer≈Ø a tv≈Ørc≈Ø</span>
      </div>
    </footer>
  </div>

  <!-- HLAVN√ç SCRIPT STR√ÅNKY -->
  <script>
    // Bezpeƒçn√© spu≈°tƒõn√≠ ikon
    if (window.lucide && typeof lucide.createIcons === "function") {
      lucide.createIcons();
    }

    // === AUTO-SAVE DO LOCALSTORAGE ===
    const AUTOSAVE_KEY      = "kartao_card_draft";
    const AUTOSAVE_DEBOUNCE = 500;
    let autosaveTimeout     = null;

    const avatarFileInput = document.getElementById("avatarFile");
    const avatarPreview   = document.getElementById("avatarPreview");
    const avatarUrlInput  = document.getElementById("avatar");

    const coverFileInput = document.getElementById("coverFile");
    const coverPreview   = document.getElementById("coverPreview");
    const coverUrlInput  = document.getElementById("cover");

    const form        = document.getElementById("cardForm");
    const formMessage = document.getElementById("formMessage");

    let avatarUploadedFile = null;
    let coverUploadedFile  = null;

    function showMessage(text, type = "info") {
      if (!formMessage) return;
      formMessage.textContent = text;
      formMessage.classList.remove("hidden", "text-emerald-300", "text-red-300", "text-sky-300");
      if (type === "success") formMessage.classList.add("text-emerald-300");
      if (type === "error")   formMessage.classList.add("text-red-300");
      if (type === "info")    formMessage.classList.add("text-sky-300");
    }

    function saveFormData() {
      const formData = {
        name: document.getElementById("name")?.value || "",
        handle: document.getElementById("handle")?.value || "",
        email: document.getElementById("email")?.value || "",
        city: document.getElementById("city")?.value || "",
        age: document.getElementById("age")?.value || "",
        category: document.getElementById("category")?.value || "",
        bio: document.getElementById("bio")?.value || "",
        avatar: document.getElementById("avatar")?.value || "",
        cover: document.getElementById("cover")?.value || "",
        instagramUrl: document.getElementById("instagramUrl")?.value || "",
        instagramFollowers: document.getElementById("instagramFollowers")?.value || "",
        instagramEngagement: document.getElementById("instagramEngagement")?.value || "",
        tiktokUrl: document.getElementById("tiktokUrl")?.value || "",
        tiktokFollowers: document.getElementById("tiktokFollowers")?.value || "",
        tiktokReach: document.getElementById("tiktokReach")?.value || "",
        youtubeUrl: document.getElementById("youtubeUrl")?.value || "",
        youtubeFollowers: document.getElementById("youtubeFollowers")?.value || "",
        facebookUrl: document.getElementById("facebookUrl")?.value || "",
        facebookFollowers: document.getElementById("facebookFollowers")?.value || "",
        pinterestUrl: document.getElementById("pinterestUrl")?.value || "",
        pinterestFollowers: document.getElementById("pinterestFollowers")?.value || "",
        priceReels: document.getElementById("priceReels")?.value || "",
        priceStories: document.getElementById("priceStories")?.value || "",
        priceCustom: document.getElementById("priceCustom")?.value || "",
        brandInfo: document.getElementById("brandInfo")?.value || "",
        savedAt: new Date().toISOString(),
      };

      localStorage.setItem(AUTOSAVE_KEY, JSON.stringify(formData));
      console.log("üíæ Formul√°≈ô automaticky ulo≈æen do localStorage");
    }

    function loadFormData() {
      const saved = localStorage.getItem(AUTOSAVE_KEY);
      if (!saved) return false;

      try {
        const formData = JSON.parse(saved);

        if (formData.name)      document.getElementById("name").value = formData.name;
        if (formData.handle)    document.getElementById("handle").value = formData.handle;
        if (formData.email)     document.getElementById("email").value = formData.email;
        if (formData.city)      document.getElementById("city").value  = formData.city;
        if (formData.age)       document.getElementById("age").value   = formData.age;
        if (formData.category)  document.getElementById("category").value = formData.category;
        if (formData.bio)       document.getElementById("bio").value   = formData.bio;

        if (formData.avatar) {
          document.getElementById("avatar").value = formData.avatar;
          document.getElementById("avatar").dispatchEvent(new Event("input"));
        }
        if (formData.cover) {
          document.getElementById("cover").value = formData.cover;
          document.getElementById("cover").dispatchEvent(new Event("input"));
        }

        if (formData.instagramUrl)        document.getElementById("instagramUrl").value        = formData.instagramUrl;
        if (formData.instagramFollowers)  document.getElementById("instagramFollowers").value  = formData.instagramFollowers;
        if (formData.instagramEngagement) document.getElementById("instagramEngagement").value = formData.instagramEngagement;

        if (formData.tiktokUrl)       document.getElementById("tiktokUrl").value       = formData.tiktokUrl;
        if (formData.tiktokFollowers) document.getElementById("tiktokFollowers").value = formData.tiktokFollowers;
        if (formData.tiktokReach)     document.getElementById("tiktokReach").value     = formData.tiktokReach;

        if (formData.youtubeUrl)       document.getElementById("youtubeUrl").value       = formData.youtubeUrl;
        if (formData.youtubeFollowers) document.getElementById("youtubeFollowers").value = formData.youtubeFollowers;

        if (formData.facebookUrl)       document.getElementById("facebookUrl").value       = formData.facebookUrl;
        if (formData.facebookFollowers) document.getElementById("facebookFollowers").value = formData.facebookFollowers;

        if (formData.pinterestUrl)       document.getElementById("pinterestUrl").value       = formData.pinterestUrl;
        if (formData.pinterestFollowers) document.getElementById("pinterestFollowers").value = formData.pinterestFollowers;

        if (formData.priceReels)    document.getElementById("priceReels").value    = formData.priceReels;
        if (formData.priceStories)  document.getElementById("priceStories").value  = formData.priceStories;
        if (formData.priceCustom)   document.getElementById("priceCustom").value   = formData.priceCustom;
        if (formData.brandInfo)     document.getElementById("brandInfo").value     = formData.brandInfo;

        const savedDate   = new Date(formData.savedAt);
        const now         = new Date();
        const diffMinutes = Math.round((now - savedDate) / 60000);
        let timeText =
          diffMinutes < 1 ? "p≈ôed chv√≠l√≠" :
          diffMinutes === 1 ? "p≈ôed minutou" :
          diffMinutes < 60 ? `p≈ôed ${diffMinutes} minutami` :
          `p≈ôed ${Math.round(diffMinutes / 60)} hodinami`;

        showMessage(`‚úÖ Naƒçtena ulo≈æen√° data z ${timeText}`, "success");
        return true;
      } catch (error) {
        console.error("‚ùå Chyba p≈ôi naƒç√≠t√°n√≠ dat z localStorage:", error);
        return false;
      }
    }

    function scheduleAutosave() {
      if (autosaveTimeout) clearTimeout(autosaveTimeout);
      autosaveTimeout = setTimeout(saveFormData, AUTOSAVE_DEBOUNCE);
    }

    // n√°hled avatar + cover
    avatarFileInput.addEventListener("change", (e) => {
      const file = e.target.files[0];
      if (file) {
        avatarUploadedFile = file;
        const reader = new FileReader();
        reader.onload = (ev) => {
          avatarPreview.innerHTML = `<img src="${ev.target.result}" alt="Avatar preview" class="w-full h-full object-cover" />`;
          if (window.lucide && typeof lucide.createIcons === "function") {
            lucide.createIcons();
          }
        };
        reader.readAsDataURL(file);
        avatarUrlInput.value = "";
      }
    });

    avatarUrlInput.addEventListener("input", (e) => {
      const url = e.target.value.trim();
      if (url) {
        avatarUploadedFile = null;
        avatarPreview.innerHTML =
          `<img src="${url}" alt="Avatar preview" class="w-full h-full object-cover" ` +
          `onerror="this.parentElement.innerHTML='<i data-lucide=\\'alert-circle\\' class=\\'w-8 h-8 text-red-400\\'></i><span class=\\'text-xs text-red-300 mt-2\\'>Nepoda≈ôilo se naƒç√≠st obr√°zek</span>'; if(window.lucide && typeof lucide.createIcons==='function'){lucide.createIcons();}" />`;
        if (window.lucide && typeof lucide.createIcons === "function") {
          lucide.createIcons();
        }
      } else if (!avatarUploadedFile) {
        avatarPreview.innerHTML = `
          <i data-lucide="upload" class="w-8 h-8 text-white/40 mb-2"></i>
          <span class="text-xs text-white/60">Kliknƒõte pro nahr√°n√≠</span>
          <span class="text-[11px] text-white/40 mt-1">Doporuƒçeno 800√ó800 px</span>
        `;
        if (window.lucide && typeof lucide.createIcons === "function") {
          lucide.createIcons();
        }
      }
      scheduleAutosave();
    });

    coverFileInput.addEventListener("change", (e) => {
      const file = e.target.files[0];
      if (file) {
        coverUploadedFile = file;
        const reader = new FileReader();
        reader.onload = (ev) => {
          coverPreview.innerHTML = `<img src="${ev.target.result}" alt="Cover preview" class="w-full h-full object-cover" />`;
          if (window.lucide && typeof lucide.createIcons === "function") {
            lucide.createIcons();
          }
        };
        reader.readAsDataURL(file);
        coverUrlInput.value = "";
      }
    });

    coverUrlInput.addEventListener("input", (e) => {
      const url = e.target.value.trim();
      if (url) {
        coverUploadedFile = null;
        coverPreview.innerHTML =
          `<img src="${url}" alt="Cover preview" class="w-full h-full object-cover" ` +
          `onerror="this.parentElement.innerHTML='<i data-lucide=\\'alert-circle\\' class=\\'w-8 h-8 text-red-400\\'></i><span class=\\'text-xs text-red-300 mt-2\\'>Nepoda≈ôilo se naƒç√≠st obr√°zek</span>'; if(window.lucide && typeof lucide.createIcons==='function'){lucide.createIcons();}" />`;
        if (window.lucide && typeof lucide.createIcons === "function") {
          lucide.createIcons();
        }
      } else if (!coverUploadedFile) {
        coverPreview.innerHTML = `
          <i data-lucide="image" class="w-8 h-8 text-white/40 mb-2"></i>
          <span class="text-xs text-white/60">Kliknƒõte pro nahr√°n√≠</span>
          <span class="text-[11px] text-white/40 mt-1">Doporuƒçeno 1600√ó600 px</span>
        `;
        if (window.lucide && typeof lucide.createIcons === "function") {
          lucide.createIcons();
        }
      }
      scheduleAutosave();
    });

    document.addEventListener("DOMContentLoaded", () => {
      loadFormData();

      if (form) {
        form.querySelectorAll("input, textarea, select").forEach((field) => {
          field.addEventListener("input", scheduleAutosave);
          field.addEventListener("change", scheduleAutosave);
        });
      }

      const clearDraftBtn = document.getElementById("clearDraft");
      if (clearDraftBtn) {
        clearDraftBtn.addEventListener("click", () => {
          if (confirm("Opravdu chcete smazat v≈°echna ulo≈æen√° data a zaƒç√≠t znovu?")) {
            localStorage.removeItem(AUTOSAVE_KEY);
            window.location.reload();
          }
        });
      }

      setTimeout(() => {
        if (window.lucide && typeof lucide.createIcons === "function") {
          lucide.createIcons();
        }
      }, 100);
    });

    // ==== FUNKCE PRO NAƒåTEN√ç KARTY Z FIRESTORE ====
    async function loadExistingCard(user, db) {
      try {
        const docRef = db.collection("creators").doc(user.uid);
        const snap   = await docRef.get();

        if (!snap.exists) {
          console.log("‚ÑπÔ∏è U≈æivatel zat√≠m nem√° ulo≈æenou kartu v kolekci 'creators'.");
          return;
        }

        const data = snap.data();
        console.log("üì• Naƒçtena karta z Firestore:", data);

        // Z√°kladn√≠ √∫daje
        if (data.name)     document.getElementById("name").value   = data.name;
        if (data.handle)   document.getElementById("handle").value = data.handle;
        if (data.email)    document.getElementById("email").value  = data.email;
        if (data.city)     document.getElementById("city").value   = data.city;
        if (data.age)      document.getElementById("age").value    = data.age;
        if (data.category) document.getElementById("category").value = data.category;
        if (data.bio)      document.getElementById("bio").value    = data.bio;

        // Avatar / cover
        if (data.avatar) {
          document.getElementById("avatar").value = data.avatar;
          document.getElementById("avatar").dispatchEvent(new Event("input"));
        }
        if (data.cover) {
          document.getElementById("cover").value = data.cover;
          document.getElementById("cover").dispatchEvent(new Event("input"));
        }

        // Soci√°ln√≠ s√≠tƒõ
        if (data.metrics) {
          const m = data.metrics;

          if (m.instagram) {
            if (m.instagram.url)        document.getElementById("instagramUrl").value        = m.instagram.url;
            if (m.instagram.followers)  document.getElementById("instagramFollowers").value  = m.instagram.followers;
            if (m.instagram.engagement) document.getElementById("instagramEngagement").value = m.instagram.engagement;
          }

          if (m.tiktok) {
            if (m.tiktok.url)       document.getElementById("tiktokUrl").value       = m.tiktok.url;
            if (m.tiktok.followers) document.getElementById("tiktokFollowers").value = m.tiktok.followers;
            if (m.tiktok.reach)     document.getElementById("tiktokReach").value     = m.tiktok.reach;
          }

          if (m.youtube) {
            if (m.youtube.url)       document.getElementById("youtubeUrl").value       = m.youtube.url;
            if (m.youtube.followers) document.getElementById("youtubeFollowers").value = m.youtube.followers;
          }

          if (m.facebook) {
            if (m.facebook.url)       document.getElementById("facebookUrl").value       = m.facebook.url;
            if (m.facebook.followers) document.getElementById("facebookFollowers").value = m.facebook.followers;
          }

          if (m.pinterest) {
            if (m.pinterest.url)       document.getElementById("pinterestUrl").value       = m.pinterest.url;
            if (m.pinterest.followers) document.getElementById("pinterestFollowers").value = m.pinterest.followers;
          }
        }

        // Cen√≠k
        if (data.prices) {
          if (data.prices.reels != null)   document.getElementById("priceReels").value   = data.prices.reels;
          if (data.prices.stories != null) document.getElementById("priceStories").value = data.prices.stories;
          if (data.prices.custom)          document.getElementById("priceCustom").value  = data.prices.custom;
        }

        if (data.brandInfo) {
          document.getElementById("brandInfo").value = data.brandInfo;
        }

        showMessage("‚úÖ Naƒçetli jsme ulo≈æenou kartu z va≈°eho profilu.", "success");
      } catch (err) {
        console.error("‚ùå Chyba p≈ôi naƒç√≠t√°n√≠ karty z Firestore:", err);

        // Kdy≈æ je klient offline, jen informativnƒõ do konzole
        if (err && err.message && err.message.includes("client is offline")) {
          console.warn("‚ÑπÔ∏è Firestore hl√°s√≠ offline ‚Äì pou≈æ√≠v√°m jen lok√°lnƒõ ulo≈æen√Ω draft.");
          return;
        }

        showMessage("Nepoda≈ôilo se naƒç√≠st ulo≈æenou kartu z profilu.", "error");
      }
    }

    // === FIREBASE ƒå√ÅST ‚Äì p≈ôihl√°≈°en√≠ + ulo≈æen√≠ karty ===
    let currentUser = null;

    window.addEventListener("load", async () => {
      // Pro jistotu zapneme online re≈æim Firestore
      if (window.firebase && firebase.firestore) {
        try {
          await firebase.firestore().enableNetwork();
          console.log("üåê Firestore p≈ôepnut do ONLINE re≈æimu");
        } catch (e) {
          console.warn("‚ö†Ô∏è Nepoda≈ôilo se zapnout online re≈æim Firestore:", e);
        }
      }

      const auth = window.auth || (window.firebase ? firebase.auth() : null);
      const db   = window.db   || (window.firebase ? firebase.firestore() : null);

      console.log("ZK: Firebase na zalozit-kartu.html", {
        hasFirebase: typeof firebase !== "undefined",
        hasAuthGlobal: !!window.auth,
        hasDbGlobal: !!window.db,
        authObj: !!auth,
        dbObj: !!db,
      });

      if (!auth || !db) {
        console.error("‚ùå Firebase auth/db nejsou k dispozici na zalozit-kartu.html");
        return;
      }

      const loggedInEls  = document.querySelectorAll('[data-show-when="loggedin"]');
      const loggedOutEls = document.querySelectorAll('[data-show-when="loggedout"]');
      const headerLogout = document.querySelector('[data-show-when="loggedin"]');

      auth.onAuthStateChanged((user) => {
        if (!user) {
          console.log("‚ùå Nep≈ôihl√°≈°en√Ω u≈æivatel ‚Äì p≈ôesmƒõrov√°v√°m na login.");
          loggedInEls.forEach((el)  => el.classList.add("hidden"));
          loggedOutEls.forEach((el) => el.classList.remove("hidden"));
          window.location.href = "login.html";
          return;
        }

        currentUser = user;
        console.log("‚úÖ P≈ôihl√°≈°en√Ω u≈æivatel na zalozit-kartu.html:", currentUser.email);

        loggedInEls.forEach((el)  => el.classList.remove("hidden"));
        loggedOutEls.forEach((el) => el.classList.add("hidden"));

        const emailInput = document.getElementById("email");
        if (emailInput && !emailInput.value) {
          emailInput.value = user.email || "";
        }

        // naƒç√≠st data karty z Firestore
        loadExistingCard(user, db);
      });

      if (headerLogout) {
        headerLogout.addEventListener("click", () => {
          auth.signOut().catch((err) => {
            console.error("‚ùå Chyba p≈ôi odhl√°≈°en√≠:", err);
          });
        });
      }

      form.addEventListener("submit", async (e) => {
        e.preventDefault();

        if (!currentUser) {
          showMessage(
            "‚ùå Mus√≠te b√Ωt p≈ôihl√°≈°eni pro vytvo≈ôen√≠ karty. P≈ôesmƒõrov√°v√°m...",
            "error"
          );
          setTimeout(() => {
            window.location.href = "login.html";
          }, 2000);
          return;
        }

        const hasAvatar = avatarUploadedFile || avatarUrlInput.value.trim();
        const hasCover  = coverUploadedFile  || coverUrlInput.value.trim();

        if (!hasAvatar) {
          showMessage("Pros√≠m nahrajte profilovou fotku nebo vlo≈æte URL.", "error");
          return;
        }

        if (!hasCover) {
          showMessage("Pros√≠m nahrajte √∫vodn√≠ foto nebo vlo≈æte URL.", "error");
          return;
        }

        showMessage("Ukl√°d√°m kartu...", "info");

        const now = Date.now();
        let avatarUrl = avatarUrlInput.value.trim();
        let coverUrl  = coverUrlInput.value.trim();

        try {
          if (avatarUploadedFile && !avatarUrl) {
            const reader = new FileReader();
            await new Promise((resolve) => {
              reader.onload = (ev) => {
                avatarUrl = ev.target.result;
                resolve();
              };
              reader.readAsDataURL(avatarUploadedFile);
            });
          }

          if (coverUploadedFile && !coverUrl) {
            const reader = new FileReader();
            await new Promise((resolve) => {
              reader.onload = (ev) => {
                coverUrl = ev.target.result;
                resolve();
              };
              reader.readAsDataURL(coverUploadedFile);
            });
          }

          const data = {
            uid: currentUser.uid,
            name: document.getElementById("name").value.trim(),
            handle: document.getElementById("handle").value.trim(),
            email: document.getElementById("email").value.trim(),
            city: document.getElementById("city").value.trim(),
            age: document.getElementById("age").value.trim(),
            category: document.getElementById("category").value || null,
            avatar: avatarUrl,
            cover: coverUrl,
            bio: document.getElementById("bio").value.trim(),
            metrics: {
              instagram: {
                url: document.getElementById("instagramUrl").value.trim() || null,
                followers: Number(document.getElementById("instagramFollowers").value) || null,
                engagement: Number(document.getElementById("instagramEngagement").value) || null,
              },
              tiktok: {
                url: document.getElementById("tiktokUrl").value.trim() || null,
                followers: Number(document.getElementById("tiktokFollowers").value) || null,
                reach: Number(document.getElementById("tiktokReach").value) || null,
              },
              youtube: {
                url: document.getElementById("youtubeUrl").value.trim() || null,
                followers: Number(document.getElementById("youtubeFollowers").value) || null,
              },
              facebook: {
                url: document.getElementById("facebookUrl").value.trim() || null,
                followers: Number(document.getElementById("facebookFollowers").value) || null,
              },
              pinterest: {
                url: document.getElementById("pinterestUrl").value.trim() || null,
                followers: Number(document.getElementById("pinterestFollowers").value) || null,
              },
            },
            prices: {
              reels:   Number(document.getElementById("priceReels").value)   || null,
              stories: Number(document.getElementById("priceStories").value) || null,
              custom:  document.getElementById("priceCustom").value.trim()   || null,
            },
            brandInfo:  document.getElementById("brandInfo").value.trim() || null,
            visibility: "public",
            status:     "active",
            updatedAt:  now,
            createdAt:  now,
          };

          console.log("üíæ Ukl√°d√°m kartu do Firestore pro u≈æivatele:", currentUser.uid);
          await db.collection("creators").doc(currentUser.uid).set(data);
          console.log("‚úÖ Karta √∫spƒõ≈°nƒõ ulo≈æena do Firestore!");

          localStorage.removeItem(AUTOSAVE_KEY);
          showSuccessScreen(data);
        } catch (err) {
          console.error("‚ùå Chyba p≈ôi ukl√°d√°n√≠:", err);
          showMessage("Nastala chyba p≈ôi ukl√°d√°n√≠ karty: " + err.message, "error");
        }
      });
    });

    function showSuccessScreen(cardData) {
      const formSection = document.querySelector("section.max-w-3xl");

      let totalFollowers = 0;
      if (cardData.metrics.instagram?.followers) totalFollowers += cardData.metrics.instagram.followers;
      if (cardData.metrics.tiktok?.followers)    totalFollowers += cardData.metrics.tiktok.followers;
      if (cardData.metrics.youtube?.followers)   totalFollowers += cardData.metrics.youtube.followers;
      if (cardData.metrics.facebook?.followers)  totalFollowers += cardData.metrics.facebook.followers;
      if (cardData.metrics.pinterest?.followers) totalFollowers += cardData.metrics.pinterest.followers;

      const formatFollowers = (num) => {
        if (!num) return "0";
        if (num >= 1000000) return (num / 1000000).toFixed(1) + "M";
        if (num >= 1000)    return (num / 1000).toFixed(0) + "k";
        return num.toString();
      };

      formSection.innerHTML = `
        <div class="py-8">
          <div class="mb-6 text-center">
            <div class="inline-block relative mb-4">
              <div class="w-20 h-20 mx-auto rounded-full bg-gradient-to-br from-emerald-500/20 to-emerald-600/10 border-2 border-emerald-500/30 grid place-items-center animate-bounce">
                <i data-lucide="check" class="w-10 h-10 text-emerald-400"></i>
              </div>
              <div class="absolute inset-0 w-20 h-20 mx-auto rounded-full bg-emerald-400/20 animate-ping"></div>
            </div>
            <h1 class="text-2xl md:text-3xl font-extrabold mb-2 bg-gradient-to-r from-emerald-400 to-sky-400 bg-clip-text text-transparent">
              Karta √∫spƒõ≈°nƒõ vytvo≈ôena! üéâ
            </h1>
            <p class="text-white/60 text-sm">
              Va≈°e karta je nyn√≠ ve≈ôejnƒõ dostupn√°.
            </p>
          </div>

          <div class="max-w-sm mx-auto mb-8">
            <article class="glass-panel rounded-2xl border border-white/10 overflow-hidden hover:border-fuchsia-400/30 transition-all duration-300 group">
              <div class="relative h-32 bg-gradient-to-br from-fuchsia-600/30 to-amber-400/30 overflow-hidden">
                ${
                  cardData.cover
                    ? `<img src="${cardData.cover}" alt="Cover" class="w-full h-full object-cover" />`
                    : '<div class="absolute inset-0 bg-gradient-to-br from-fuchsia-500/20 to-amber-400/20"></div>'
                }
                <div class="absolute inset-0 bg-gradient-to-t from-neutral-950/80 to-transparent"></div>
              </div>

              <div class="p-5 -mt-12 relative">
                <div class="flex items-start gap-4 mb-4">
                  <div class="relative flex-shrink-0">
                    ${
                      cardData.avatar
                        ? `<img src="${cardData.avatar}" alt="${cardData.name}" class="w-20 h-20 rounded-xl object-cover ring-4 ring-neutral-950 shadow-xl group-hover:ring-fuchsia-500/50 transition-all" />`
                        : `<div class="w-20 h-20 rounded-xl bg-gradient-to-br from-fuchsia-500 to-amber-400 grid place-items-center ring-4 ring-neutral-950 shadow-xl">
                            <i data-lucide="user" class="w-10 h-10 text-white"></i>
                          </div>`
                    }
                    <div class="absolute -bottom-1 -right-1 w-6 h-6 rounded-lg bg-gradient-to-br from-emerald-500 to-emerald-600 grid place-items-center ring-2 ring-neutral-950">
                      <i data-lucide="check" class="w-3 h-3 text-white"></i>
                    </div>
                  </div>
                  
                  <div class="flex-1 min-w-0 pt-8">
                    <h3 class="font-bold text-xl truncate mb-1">${cardData.name}</h3>
                    <p class="text-sm text-white/60 truncate mb-2">
                      ${cardData.handle || "@" + cardData.name.toLowerCase().replace(/\s+/g, "")}
                    </p>
                    ${
                      cardData.category
                        ? `<span class="inline-flex items-center gap-1 px-2 py-1 rounded-lg bg-fuchsia-500/20 border border-fuchsia-500/30 text-fuchsia-300 text-xs font-medium">
                            <i data-lucide="tag" class="w-3 h-3"></i>
                            ${cardData.category}
                          </span>`
                        : ""
                    }
                  </div>
                </div>

                ${
                  cardData.bio
                    ? `<div class="mb-4">
                        <p class="text-sm text-white/70 line-clamp-2">${cardData.bio}</p>
                      </div>`
                    : ""
                }

                <div class="grid grid-cols-3 gap-2 mb-4">
                  <div class="rounded-xl bg-gradient-to-br from-sky-500/10 to-sky-600/5 border border-sky-500/20 p-3 text-center">
                    <div class="text-xs text-sky-300 mb-1">Sleduj√≠c√≠</div>
                    <div class="font-bold text-sm">${formatFollowers(totalFollowers)}</div>
                  </div>
                  ${
                    cardData.city
                      ? `<div class="rounded-xl bg-gradient-to-br from-amber-500/10 to-amber-600/5 border border-amber-500/20 p-3 text-center">
                          <div class="text-xs text-amber-300 mb-1">Mƒõsto</div>
                          <div class="font-bold text-sm truncate">${cardData.city}</div>
                        </div>`
                      : ""
                  }
                  ${
                    cardData.age
                      ? `<div class="rounded-xl bg-gradient-to-br from-fuchsia-500/10 to-fuchsia-600/5 border border-fuchsia-500/20 p-3 text-center">
                          <div class="text-xs text-fuchsia-300 mb-1">Vƒõk</div>
                          <div class="font-bold text-sm">${cardData.age}</div>
                        </div>`
                      : ""
                  }
                </div>

                <div class="flex items-center gap-2 flex-wrap mb-4">
                  ${
                    cardData.metrics.instagram?.url
                      ? `<div class="flex items-center gap-1 px-2 py-1 rounded-lg bg-gradient-to-br from-fuchsia-500/10 to-pink-500/5 border border-fuchsia-500/20">
                          <i data-lucide="instagram" class="w-3 h-3 text-fuchsia-400"></i>
                          <span class="text-xs text-fuchsia-300">${formatFollowers(cardData.metrics.instagram.followers || 0)}</span>
                        </div>`
                      : ""
                  }
                  ${
                    cardData.metrics.tiktok?.url
                      ? `<div class="flex items-center gap-1 px-2 py-1 rounded-lg bg-gradient-to-br from-sky-500/10 to-cyan-500/5 border border-sky-500/20">
                          <i data-lucide="music" class="w-3 h-3 text-sky-400"></i>
                          <span class="text-xs text-sky-300">${formatFollowers(cardData.metrics.tiktok.followers || 0)}</span>
                        </div>`
                      : ""
                  }
                  ${
                    cardData.metrics.youtube?.url
                      ? `<div class="flex items-center gap-1 px-2 py-1 rounded-lg bg-gradient-to-br from-red-500/10 to-rose-500/5 border border-red-500/20">
                          <i data-lucide="youtube" class="w-3 h-3 text-red-400"></i>
                          <span class="text-xs text-red-300">${formatFollowers(cardData.metrics.youtube.followers || 0)}</span>
                        </div>`
                      : ""
                  }
                  ${
                    cardData.metrics.facebook?.url
                      ? `<div class="flex items-center gap-1 px-2 py-1 rounded-lg bg-gradient-to-br from-blue-500/10 to-indigo-500/5 border border-blue-500/20">
                          <i data-lucide="facebook" class="w-3 h-3 text-blue-400"></i>
                          <span class="text-xs text-blue-300">${formatFollowers(cardData.metrics.facebook.followers || 0)}</span>
                        </div>`
                      : ""
                  }
                  ${
                    cardData.metrics.pinterest?.url
                      ? `<div class="flex items-center gap-1 px-2 py-1 rounded-lg bg-gradient-to-br from-rose-500/10 to-pink-500/5 border border-rose-500/20">
                          <i data-lucide="image" class="w-3 h-3 text-rose-400"></i>
                          <span class="text-xs text-rose-300">${formatFollowers(cardData.metrics.pinterest.followers || 0)}</span>
                        </div>`
                      : ""
                  }
                </div>

                ${
                  cardData.prices?.reels || cardData.prices?.stories
                    ? `<div class="pt-3 border-t border-white/10">
                        <div class="text-xs text-white/50 mb-2">Orientaƒçn√≠ ceny:</div>
                        <div class="flex items-center gap-2 flex-wrap">
                          ${
                            cardData.prices.reels
                              ? `<span class="text-xs px-2 py-1 rounded-lg bg-white/5 text-emerald-400">Reels: ${cardData.prices.reels} Kƒç</span>`
                              : ""
                          }
                          ${
                            cardData.prices.stories
                              ? `<span class="text-xs px-2 py-1 rounded-lg bg-white/5 text-sky-400">Stories: ${cardData.prices.stories} Kƒç</span>`
                              : ""
                          }
                        </div>
                      </div>`
                    : ""
                }
              </div>
            </article>
          </div>

          <div class="flex flex-col sm:flex-row items-center justify-center gap-3 mb-6">
            <a href="index.html" class="w-full sm:w-auto inline-flex items-center justify-center gap-2 px-6 py-3 rounded-xl bg-gradient-to-r from-fuchsia-500 to-amber-400 text-neutral-950 font-bold shadow-soft hover:opacity-90 transition">
              <i data-lucide="eye" class="w-5 h-5"></i>
              Zobrazit mezi tv≈Ørci
            </a>
            <a href="kartao-muj-ucet.html" class="w-full sm:w-auto inline-flex items-center justify-center gap-2 px-6 py-3 rounded-xl bg-white/10 border border-white/20 hover:bg-white/15 transition">
              <i data-lucide="user" class="w-5 h-5"></i>
              P≈ôej√≠t na M≈Øj √∫ƒçet
            </a>
          </div>

          <div class="flex flex-col sm:flex-row items-center justify-center gap-3 text-sm">
            <button onclick="window.location.reload()" class="text-white/60 hover:text-white transition inline-flex items-center gap-2">
              <i data-lucide="edit" class="w-4 h-4"></i>
              Upravit kartu
            </button>
            <span class="hidden sm:block text-white/30">‚Ä¢</span>
            <a href="kartao-cenik.html" class="text-white/60 hover:text-white transition inline-flex items-center gap-2">
              <i data-lucide="tag" class="w-4 h-4"></i>
              Nastavit cen√≠k
            </a>
            <span class="hidden sm:block text-white/30">‚Ä¢</span>
            <a href="vip.html" class="text-amber-400 hover:text-amber-300 transition inline-flex items-center gap-2">
              <i data-lucide="crown" class="w-4 h-4"></i>
              Z√≠skat VIP status
            </a>
          </div>
        </div>
      `;

      window.scrollTo({ top: 0, behavior: "smooth" });
      setTimeout(() => {
        if (window.lucide && typeof lucide.createIcons === "function") {
          lucide.createIcons();
        }
      }, 100);
    }
  </script>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-storage-compat.js"></script>

  <!-- Konfigurace + inicializace Firebase -->
  <script src="firebase-config.js"></script>
  <script src="firebase-init.js"></script>

  <!-- Tv≈Øj spoleƒçn√Ω API skript -->
  <script src="api-services.js"></script>
</body>
</html>

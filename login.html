<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Přihlášení</title>
  <header>
  <button id="login-google" class="btn btn-light">
    Přihlásit se přes Google
  </button>
</header>

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // Nastavení společného continueUrl (po úspěšném přihlášení se vrať na index.html)
    const CONTINUE_URL = (location.origin ? location.origin : '') + '/index.html';
    const AUTH_HANDLER = 'https://kartao-cz.firebaseapp.com/__/auth/handler';
    const AUTH_URL = AUTH_HANDLER + '?continueUrl=' + encodeURIComponent(CONTINUE_URL);

    document.addEventListener('DOMContentLoaded', () => {
      const modal = document.getElementById('modal');
      const overlay = document.getElementById('overlay');
      const closeBtn = document.getElementById('closeBtn');
      const loginForm = document.getElementById('loginForm');
      const loginBtn = document.getElementById('loginWindowBtn');
      const registerForm = document.getElementById('registerForm');
      const registerBtn = document.getElementById('registerWindowBtn');

      function closeModal() {
        window.location.href = 'index.html';
      }

      overlay.addEventListener('click', closeModal);
      closeBtn.addEventListener('click', closeModal);

      loginBtn.addEventListener('click', () => {
        loginForm.classList.toggle('hidden');
        registerForm.classList.add('hidden');
      });

      registerBtn.addEventListener('click', () => {
        registerForm.classList.toggle('hidden');
        loginForm.classList.add('hidden');
      });

      document.getElementById('loginForm').addEventListener('submit', (e) => {
        e.preventDefault();
        window.location.href = AUTH_URL;
      });

      document.getElementById('registerForm').addEventListener('submit', (e) => {
        e.preventDefault();
        window.location.href = AUTH_URL;
      });
    });
  </script>
</head>
<body class="min-h-screen bg-transparent flex items-center justify-center relative overflow-hidden">
  <iframe src="index.html" class="fixed inset-0 w-full h-full blur-md brightness-75 -z-10"></iframe>
  <div id="overlay" class="fixed inset-0 bg-black/40 backdrop-blur-sm z-0"></div>

  <div id="modal" class="relative z-10 w-full max-w-sm">
    <div class="bg-white/95 backdrop-saturate-150 rounded-2xl shadow-2xl ring-1 ring-black/5 p-6 relative">
      <button id="closeBtn" aria-label="Zavřít" class="absolute -right-2 -top-2 w-9 h-9 grid place-items-center rounded-full bg-white shadow-md ring-1 ring-black/10 text-gray-500 hover:text-gray-700">×</button>

      <h2 class="text-2xl font-semibold text-center mb-2 tracking-tight">Registrujte se nebo se…</h2>
      <p class="text-center text-gray-500 text-sm mb-4">Pro pokračování se registrujte nebo přihlaste</p>

      <a href="#" id="fbLink" class="block w-full bg-[#1877F2] hover:bg-[#1564d9] text-white py-2.5 rounded-md font-medium mb-2 text-center">Pokračovat přes Facebook</a>
      <a href="#" id="googleLink" class="block w-full border border-gray-300 bg-white hover:bg-gray-50 text-gray-700 py-2.5 rounded-md font-medium flex items-center justify-center gap-2 mb-4">
        <img src="https://www.svgrepo.com/show/355037/google.svg" alt="Google" class="w-4 h-4" /> Pokračovat pomocí Googlu
      </a>

      <div class="flex items-center my-3 select-none">
        <hr class="flex-grow border-gray-300" />
        <span class="px-2 text-gray-400 text-sm">nebo</span>
        <hr class="flex-grow border-gray-300" />
      </div>

      <button id="loginWindowBtn" class="w-full bg-pink-600 hover:bg-pink-700 text-white py-2.5 rounded-md font-medium mb-2">Přihlásit se</button>

      <form id="loginForm" class="hidden mt-3 space-y-3">
        <input type="email" placeholder="E-mail" required class="w-full border border-gray-300 rounded-md p-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-pink-500" />
        <input type="password" placeholder="Heslo" required class="w-full border border-gray-300 rounded-md p-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-pink-500" />
        <button type="submit" class="w-full bg-pink-600 hover:bg-pink-700 text-white py-2 rounded-md font-medium">Přihlásit se</button>
        <a href="#" id="forgotLink" class="block text-right text-xs text-pink-600 hover:underline">Zapomněli jste heslo?</a>
      </form>

      <button id="registerWindowBtn" class="w-full border border-gray-300 text-gray-700 hover:bg-gray-50 py-2.5 rounded-md font-medium mt-3">Registrace</button>

      <form id="registerForm" class="hidden mt-3 space-y-3">
        <input type="text" placeholder="Jméno a příjmení" required class="w-full border border-gray-300 rounded-md p-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-pink-500" />
        <input type="email" placeholder="E-mail" required class="w-full border border-gray-300 rounded-md p-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-pink-500" />
        <input type="password" placeholder="Heslo" required class="w-full border border-gray-300 rounded-md p-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-pink-500" />
        <input type="password" placeholder="Potvrdit heslo" required class="w-full border border-gray-300 rounded-md p-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-pink-500" />
        <button type="submit" class="w-full bg-pink-600 hover:bg-pink-700 text-white py-2 rounded-md font-medium">Registrovat</button>
      </form>

      <p class="text-xs text-gray-400 text-center mt-4 leading-tight">
        Registrací souhlasíte s našimi
        <a href="pravidla-podminky.html" class="text-pink-600 hover:underline">Obchodními podmínkami</a>
        a <a href="ochrana-osobnich-udaju.html" class="text-pink-600 hover:underline">Zásadami o ochraně osobních údajů</a>.
      </p>
    </div>
  </div>

  <script>
    document.getElementById('fbLink').setAttribute('href', AUTH_URL);
    document.getElementById('googleLink').setAttribute('href', AUTH_URL);
    document.getElementById('forgotLink').setAttribute('href', AUTH_URL);
  </script>
</body>
</html>

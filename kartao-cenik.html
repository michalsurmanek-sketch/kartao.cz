<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kartao.cz â€“ CenÃ­k</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>ğŸ’°</text></svg>">
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Lucide ikony - unified system -->
  <script defer src="https://cdn.jsdelivr.net/npm/lucide@latest/dist/umd/lucide.min.js"></script>
  <script defer src="icons-loader.js"></script>
  <style>
    .card{background-color:rgba(23,23,23,.6);border:1px solid rgba(255,255,255,.1);border-radius:1rem}
    .btn{display:inline-flex;align-items:center;gap:.5rem;padding:.6rem .9rem;border-radius:.75rem}
    .btn-primary{background:#e879f9}
    .btn-primary:hover{background:#db58f6}
    .btn-light{background:#fff;color:#111}
    .btn-light:hover{background:#f3f3f3}
    .btn-outline{border:1px solid rgba(255,255,255,.2)}
    .badge{display:inline-flex;align-items:center;gap:.35rem;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.06);padding:.15rem .5rem;border-radius:.5rem}
    .toggle{display:inline-flex;border:1px solid rgba(255,255,255,.15);border-radius:.75rem;overflow:hidden}
    .toggle button{padding:.35rem .7rem}
    .toggle .active{background:#fff;color:#111}
    .halo{position:relative}
    .halo:before{content:"";position:absolute;inset:-2px;border-radius:1.1rem;background:linear-gradient(135deg,rgba(236,72,153,.45),rgba(251,191,36,.35));filter:blur(16px);opacity:.3;z-index:-1}
  </style>
</head>
<body class="min-h-screen bg-neutral-950 text-white">
  <!-- NAVBAR -->
  <header class="sticky top-0 z-40 backdrop-blur supports-[backdrop-filter]:bg-neutral-950/70 border-b border-white/10">
    <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="index.html" class="flex items-center gap-3">
        <div class="w-9 h-9 rounded-2xl bg-gradient-to-tr from-fuchsia-500 to-amber-400 grid place-items-center"><i data-lucide="crown" class="w-5 h-5"></i></div>
        <div>
          <div class="font-extrabold tracking-tight text-lg">Kartao.cz</div>
          <div class="text-xs text-white/60 -mt-0.5">SÃ­Å¥ influencerÅ¯ a tvÅ¯rcÅ¯</div>
        </div>
      </a>
      <nav class="hidden md:flex items-center gap-2">
        <a href="kartao-pro-firmy.html#brief" class="btn btn-light">Pro firmy</a>
        <a href="kartao-pro-tvurce.html#form" class="btn btn-primary">ZaloÅ¾it kartu</a>
      </nav>
    </div>
  </header>

  <!-- HERO -->
  <section class="border-b border-white/10 bg-[radial-gradient(80%_50%_at_50%_0%,rgba(236,72,153,0.2),transparent_60%)]">
    <div class="max-w-7xl mx-auto px-4 py-10 flex items-end justify-between gap-4">
      <div>
        <h1 class="text-3xl md:text-5xl font-extrabold tracking-tight">CenÃ­k</h1>
        <p class="mt-2 text-white/70 max-w-2xl">Tarify pro tvÅ¯rce. BezpeÄnÃ© platby pÅ™es Stripe. RoÄnÃ­ platba â‰ˆ 2 mÄ›sÃ­ce zdarma.</p>
        <div class="mt-3 flex flex-wrap gap-2 text-xs text-white/70">
          <span class="badge"><i data-lucide="shield-check" class="w-3 h-3"></i> BezpeÄnÃ½ checkout</span>
          <span class="badge"><i data-lucide="refresh-cw" class="w-3 h-3"></i> PÅ™edplatnÃ© kdykoliv zruÅ¡Ã­Å¡</span>
          <span class="badge"><i data-lucide="file-text" class="w-3 h-3"></i> Faktura eâ€‘mailem</span>
        </div>
      </div>
      <div class="toggle" id="togglePeriod">
        <button data-period="month" class="active">MÄ›sÃ­ÄnÄ›</button>
        <button data-period="year">RoÄnÄ›</button>
      </div>
    </div>
  </section>

  <!-- PRICING CARDS -->
  <main class="max-w-7xl mx-auto px-4 py-10 grid md:grid-cols-3 gap-4">
    <!-- Free -->
    <article class="card p-5 flex flex-col">
      <div class="text-sm font-semibold text-white/80">Free</div>
      <div class="text-3xl font-extrabold mt-1"><span class="js-price" data-monthly="0" data-yearly="0">0</span> KÄ <span class="text-base text-white/60 font-normal js-period">/ mÄ›s.</span></div>
      <ul class="mt-4 space-y-2 text-sm text-white/80">
        <li class="flex gap-2"><i data-lucide="check" class="w-4 h-4"></i> VeÅ™ejnÃ¡ karta</li>
        <li class="flex gap-2"><i data-lucide="check" class="w-4 h-4"></i> PoptÃ¡vky eâ€‘mailem</li>
        <li class="flex gap-2"><i data-lucide="minus" class="w-4 h-4"></i> Bez ovÄ›Å™enÃ­ ÃºÄtÅ¯</li>
      </ul>
      <a href="kartao-pro-tvurce.html#form" class="btn btn-outline mt-5">ZaloÅ¾it zdarma</a>
    </article>

    <!-- PRO -->
    <article class="card p-5 flex flex-col halo">
      <div class="text-sm font-semibold text-white/80 flex items-center gap-2">PRO <span class="badge text-amber-300 border-amber-300/30">NejoblÃ­benÄ›jÅ¡Ã­</span></div>
      <div class="text-3xl font-extrabold mt-1"><span class="js-price" data-monthly="299" data-yearly="2990">299</span> KÄ <span class="text-base text-white/60 font-normal js-period">/ mÄ›s.</span></div>
      <ul class="mt-4 space-y-2 text-sm text-white/80">
        <li class="flex gap-2"><i data-lucide="badge-check" class="w-4 h-4"></i> OvÄ›Å™enÃ­ IG/TT/YT</li>
        <li class="flex gap-2"><i data-lucide="trending-up" class="w-4 h-4"></i> Priorita ve vÃ½pisu</li>
        <li class="flex gap-2"><i data-lucide="users" class="w-4 h-4"></i> PÅ™Ã­mÃ© nabÃ­dky od firem</li>
      </ul>
      <div class="mt-5 grid grid-cols-2 gap-2">
        <button class="btn btn-primary w-full" data-plan="pro" data-interval="month">JÃ­t do PRO</button>
        <button class="btn btn-outline w-full" data-plan="pro" data-interval="year">RoÄnÄ›</button>
      </div>
    </article>

    <!-- PREMIUM -->
    <article class="card p-5 flex flex-col">
      <div class="text-sm font-semibold text-white/80">Premium</div>
      <div class="text-3xl font-extrabold mt-1"><span class="js-price" data-monthly="699" data-yearly="6990">699</span> KÄ <span class="text-base text-white/60 font-normal js-period">/ mÄ›s.</span></div>
      <ul class="mt-4 space-y-2 text-sm text-white/80">
        <li class="flex gap-2"><i data-lucide="check" class="w-4 h-4"></i> VÅ¡e z PRO</li>
        <li class="flex gap-2"><i data-lucide="chart-line" class="w-4 h-4"></i> PokroÄilÃ¡ analytika</li>
        <li class="flex gap-2"><i data-lucide="crown" class="w-4 h-4"></i> Top badge & kurÃ¡torskÃ© vÃ½bÄ›ry</li>
      </ul>
      <div class="mt-5 grid grid-cols-2 gap-2">
        <button class="btn btn-primary w-full" data-plan="premium" data-interval="month">JÃ­t do Premium</button>
        <button class="btn btn-outline w-full" data-plan="premium" data-interval="year">RoÄnÄ›</button>
      </div>
    </article>
  </main>

  <!-- ENTERPRISE NOTE -->
  <section class="border-t border-white/10 bg-neutral-900/30">
    <div class="max-w-7xl mx-auto px-4 py-8 md:flex md:items-center md:justify-between gap-6">
      <div class="flex items-start gap-3">
        <i data-lucide="shield" class="w-6 h-6 text-emerald-300"></i>
        <p class="text-white/80 text-sm">Pro agentury a znaÄky s vÄ›tÅ¡Ã­m objemem spolupracÃ­ nabÃ­zÃ­me <strong>Enterprise</strong> â€“ tÃ½movÃ© ÃºÄty, vlastnÃ­ SLA a fakturace.
        <a href="kartao-pro-firmy.html#brief" class="underline hover:text-white">NapiÅ¡te si o nabÃ­dku.</a></p>
      </div>
      <a class="btn btn-light mt-4 md:mt-0" href="kartao-pro-firmy.html#brief"><i data-lucide="mail" class="w-4 h-4"></i> Kontaktovat</a>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="border-t border-white/10">
    <div class="max-w-7xl mx-auto px-4 py-8 grid md:grid-cols-3 gap-6 text-sm text-white/60">
      <div>
        <div class="font-semibold mb-2 flex items-center gap-2"><i data-lucide="crown" class="w-5 h-5 text-amber-400"></i>Kartao.cz</div>
        <p>SÃ­Å¥ influencerÅ¯ a tvÅ¯rcÅ¯ â€“ kaÅ¾dÃ½ mÃ¡ svou kartu.</p>
      </div>
      <div class="space-y-1">
        <div class="text-amber-400 font-medium">Odkazy</div>
        <a class="block hover:text-white" href="index.html">Katalog</a>
        <a class="block hover:text-white" href="kartao-pro-tvurce.html#form">ZaloÅ¾it kartu</a>
        <a class="block hover:text-white" href="kartao-pro-firmy.html#brief">Pro firmy</a>
      </div>
      <div class="space-y-1">
        <div class="text-amber-400 font-medium">PrÃ¡vo</div>
        <a class="block hover:text-white" href="podminky.html">PodmÃ­nky</a>
        <a class="block hover:text-white" href="ochrana-soukromi.html">Ochrana soukromÃ­</a>
      </div>
    </div>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', ()=>{
      lucide.createIcons();

      // ====== Stripe PRICE IDs (z Dashboardu) â€“ podle poÅ™adÃ­, kterÃ© jsi poslal ======
      // Pokud je mapovÃ¡nÃ­ jinÃ©, Å™ekni a hned upravÃ­m.
      const PRICE_IDS = {
        pro: {
          month: 'price_1SQnfZBIDSiEwMlTzEB6DtZu',
          year:  'price_1SQngNBIDSiEwMlTwK0Fti1M'
        },
        premium: {
          month: 'price_1SQngrBIDSiEwMlT8n7z2NAO',
          year:  'price_1SQnhGBIDSiEwMlTLQOhh5Ty'
        }
      };

      // Toggle mÄ›sÃ­ÄnÄ›/roÄnÄ› â€“ jen vizuÃ¡lnÃ­
      const toggle = document.getElementById('togglePeriod');
      const priceEls = document.querySelectorAll('.js-price');
      const periodEls = document.querySelectorAll('.js-period');
      let period = 'month';
      toggle?.addEventListener('click', (e)=>{
        const btn = e.target.closest('button');
        if(!btn) return;
        period = btn.dataset.period || 'month';
        toggle.querySelectorAll('button').forEach(b=> b.classList.remove('active'));
        btn.classList.add('active');
        priceEls.forEach(el=>{
          const m = el.getAttribute('data-monthly');
          const y = el.getAttribute('data-yearly');
          el.textContent = (period==='year' ? y : m) || '0';
        });
        periodEls.forEach(el=> el.textContent = period==='year' ? ' / rok' : ' / mÄ›s.');
      });

      // Stripe Checkout â€“ volÃ¡nÃ­ naÅ¡eho API
      async function goCheckout(plan, interval){
        const email = prompt('Zadej e-mail pro fakturaci:');
        const params = new URLSearchParams(location.search);
        const creatorFromUrl = params.get('creator');
        if (creatorFromUrl) localStorage.setItem('creator_id', creatorFromUrl);
        const creator_id = creatorFromUrl || localStorage.getItem('creator_id');

        if(!email || !creator_id){
          alert('ChybÃ­ e-mail nebo ID tvÃ© karty (creator_id).');
          return;
        }

        // PÅ™idÃ¡me i price_id â€“ backend ho mÅ¯Å¾e vyuÅ¾Ã­t (nebo ignorovat)
        const price_id = PRICE_IDS?.[plan]?.[interval] || null;

        try {
          const res = await fetch('https://api.kartao.cz/api/billing/checkout', {
            method:'POST',
            headers:{'Content-Type':'application/json'},
            body: JSON.stringify({ plan, interval, email, creator_id, price_id })
          });
          const out = await res.json();
          if(!res.ok){ alert(out.error || 'Chyba pÅ™i vytvÃ¡Å™enÃ­ platby'); return; }
          location.href = out.url;
        } catch (e) {
          alert('Chyba pÅ™ipojenÃ­ k API.');
        }
      }

      document.querySelectorAll('[data-plan][data-interval]').forEach((btn)=>{
        btn.addEventListener('click', ()=>{
          const plan = btn.getAttribute('data-plan');
          const interval = btn.getAttribute('data-interval');
          goCheckout(plan, interval);
        });
      });
    });
  </script>

  <!-- Supabase + Auth -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="supabase-config.js"></script>
  <script src="supabase-init.js"></script>
  <script src="auth-unified.js"></script>
  <script src="hamburger-menu.js"></script>
  <script src="credits-system-supabase.js"></script>
</body>
</html>

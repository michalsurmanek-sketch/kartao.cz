<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SystÃ©movÃ½ Test - Kartao.cz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide ikony - unified system -->
  <script src="https://cdn.jsdelivr.net/npm/lucide@latest/dist/umd/lucide.min.js"></script>
  <script defer src="icons-loader.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
</head>
<body class="bg-gradient-to-br from-gray-900 via-black to-purple-900 text-white min-h-screen">
    <div id="app" class="container mx-auto p-6">
        <h1 class="text-4xl font-bold mb-8 text-center">
            ğŸ”§ Kartao.cz - SystÃ©movÃ½ Test
        </h1>
        
        <div id="test-results" class="space-y-4">
            <!-- Test results will appear here -->
        </div>
        
        <div class="mt-8 text-center">
            <button id="run-tests" class="bg-gradient-to-r from-green-500 to-blue-500 text-white px-6 py-3 rounded-lg font-semibold">
                ğŸš€ Spustit testy systÃ©mÅ¯
            </button>
        </div>
    </div>

    <!-- Firebase and System Scripts -->
    <script src="firebase-init.js"></script>
  <script src="auth.js"></script>
  <script src="auth-header.js"></script>
  <script src="credits-system.js"></script>
  <script src="credits-header.js"></script>
    <script src="form-validation.js"></script>
    <script src="rewards-followers-system.js"></script>
    <script src="ai-pricing-system.js"></script>
    <script src="ai-analytics-system.js"></script>
    <script src="leaderboards-system.js"></script>
    <script src="badge-system.js"></script>
    <script src="comments-system.js"></script>
    <script src="ecommerce-system.js"></script>
    <script src="world-class-statistics-system.js"></script>
    <script src="intelligent-recommendation-system.js"></script>
    <script src="company-mini-websites-system.js"></script>
    <script src="ai-price-negotiation-system.js"></script>

    <script>
        class SystemTester {
            constructor() {
                this.results = [];
                this.systems = [
                    { name: 'FormValidation', class: 'FormValidation', icon: 'check-circle', color: 'green' },
                    { name: 'RewardsFollowersSystem', class: 'RewardsFollowersSystem', icon: 'users', color: 'green' },
                    { name: 'AIPricingSystem', class: 'AIPricingSystem', icon: 'brain', color: 'pink' },
                    { name: 'AIAnalyticsSystem', class: 'AIAnalyticsSystem', icon: 'bar-chart', color: 'orange' },
                    { name: 'LeaderboardsSystem', class: 'LeaderboardsSystem', icon: 'trophy', color: 'purple' },
                    { name: 'BadgeSystem', class: 'BadgeSystem', icon: 'award', color: 'yellow' },
                    { name: 'CommentsSystem', class: 'CommentsSystem', icon: 'message-circle', color: 'indigo' },
                    { name: 'EcommerceSystem', class: 'EcommerceSystem', icon: 'shopping-bag', color: 'pink' },
                    { name: 'WorldClassStatisticsSystem', class: 'WorldClassStatisticsSystem', icon: 'activity', color: 'cyan' },
                    { name: 'IntelligentRecommendationSystem', class: 'IntelligentRecommendationSystem', icon: 'sparkles', color: 'emerald' },
                    { name: 'CompanyMiniWebsiteSystem', class: 'CompanyMiniWebsiteSystem', icon: 'globe', color: 'violet' },
                    { name: 'AIPriceNegotiationSystem', class: 'AIPriceNegotiationSystem', icon: 'handshake', color: 'amber' }
                ];
            }

            async runAllTests() {
                console.log('ğŸš€ SpouÅ¡tÃ­m systÃ©movÃ© testy...');
                this.results = [];

                for (const system of this.systems) {
                    const result = await this.testSystem(system);
                    this.results.push(result);
                    this.updateUI();
                }

                this.showSummary();
            }

            async testSystem(systemInfo) {
                const result = {
                    name: systemInfo.name,
                    icon: systemInfo.icon,
                    color: systemInfo.color,
                    status: 'testing',
                    errors: [],
                    success: false
                };

                try {
                    // Test 1: Zkontroluj, zda tÅ™Ã­da existuje
                    if (typeof window[systemInfo.class] === 'undefined') {
                        throw new Error(`TÅ™Ã­da ${systemInfo.class} nenÃ­ definovÃ¡na`);
                    }

                    // Test 2: Zkus vytvoÅ™it instanci
                    const instance = new window[systemInfo.class]();
                    
                    // Test 3: Zkontroluj zÃ¡kladnÃ­ metody
                    if (typeof instance.init !== 'function') {
                        throw new Error('Metoda init() chybÃ­');
                    }

                    // Test 4: Simuluj inicializaci
                    await new Promise(resolve => {
                        setTimeout(resolve, 100); // KrÃ¡tkÃ¡ pauza pro simulaci
                    });

                    result.status = 'passed';
                    result.success = true;
                    console.log(`âœ… ${systemInfo.name} - test proÅ¡el`);

                } catch (error) {
                    result.status = 'failed';
                    result.errors.push(error.message);
                    console.error(`âŒ ${systemInfo.name} - test selhal:`, error.message);
                }

                return result;
            }

            updateUI() {
                const container = document.getElementById('test-results');
                container.innerHTML = this.results.map(result => this.renderTestResult(result)).join('');
                
                // Reinitialize icons
                if (typeof lucide !== 'undefined') {
                }
            }

            renderTestResult(result) {
                const statusIcon = result.status === 'passed' ? 'check-circle' : 
                                  result.status === 'failed' ? 'x-circle' : 'loader';
                
                const statusColor = result.status === 'passed' ? 'text-green-400' : 
                                   result.status === 'failed' ? 'text-red-400' : 'text-yellow-400';

                return `
                    <div class="bg-white/5 border border-white/10 rounded-xl p-4">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <i data-lucide="${result.icon}" class="w-6 h-6 text-${result.color}-400"></i>
                                <div>
                                    <h3 class="font-semibold">${result.name}</h3>
                                    ${result.errors.length > 0 ? `<div class="text-sm text-red-400">${result.errors[0]}</div>` : ''}
                                </div>
                            </div>
                            <div class="flex items-center gap-2">
                                <i data-lucide="${statusIcon}" class="w-5 h-5 ${statusColor} ${result.status === 'testing' ? 'animate-spin' : ''}"></i>
                                <span class="text-sm ${statusColor} font-medium">
                                    ${result.status === 'passed' ? 'ÃšspÄ›ch' : result.status === 'failed' ? 'Chyba' : 'TestovÃ¡nÃ­...'}
                                </span>
                            </div>
                        </div>
                    </div>
                `;
            }

            showSummary() {
                const passed = this.results.filter(r => r.success).length;
                const failed = this.results.filter(r => !r.success).length;
                const total = this.results.length;

                const summaryHTML = `
                    <div class="mt-8 p-6 bg-gradient-to-r from-blue-500/10 to-purple-500/10 border border-blue-500/20 rounded-2xl">
                        <h2 class="text-2xl font-bold mb-4 text-center">ğŸ“Š ShrnutÃ­ testÅ¯</h2>
                        <div class="grid grid-cols-3 gap-6 text-center">
                            <div>
                                <div class="text-3xl font-bold text-green-400">${passed}</div>
                                <div class="text-sm text-gray-400">ÃšspÄ›Å¡nÃ©</div>
                            </div>
                            <div>
                                <div class="text-3xl font-bold text-red-400">${failed}</div>
                                <div class="text-sm text-gray-400">ChybnÃ©</div>
                            </div>
                            <div>
                                <div class="text-3xl font-bold text-blue-400">${total}</div>
                                <div class="text-sm text-gray-400">Celkem</div>
                            </div>
                        </div>
                        <div class="mt-6 text-center">
                            ${failed === 0 ? 
                                '<div class="text-green-400 font-semibold">ğŸ‰ VÅ¡echny systÃ©my fungujÃ­ sprÃ¡vnÄ›!</div>' :
                                '<div class="text-yellow-400 font-semibold">âš ï¸ NÄ›kterÃ© systÃ©my vyÅ¾adujÃ­ opravu</div>'
                            }
                        </div>
                    </div>
                `;

                document.getElementById('test-results').innerHTML += summaryHTML;
                
                if (typeof lucide !== 'undefined') {
                }
            }
        }

        // Initialize tester
        document.addEventListener('DOMContentLoaded', () => {
            const tester = new SystemTester();
            
            // Initialize icons
            if (typeof lucide !== 'undefined') {
            }

            document.getElementById('run-tests').addEventListener('click', () => {
                tester.runAllTests();
            });
        });
    </script>
</body>
</html>
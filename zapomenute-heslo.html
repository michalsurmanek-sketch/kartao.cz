<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kartao.cz ‚Äì Obnoven√≠ hesla</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üîë</text></svg>">

  <!-- Preload -->
  <link rel="preload" href="https://cdn.tailwindcss.com" as="script" />
  <link rel="preload" href="https://unpkg.com/lucide@latest/dist/umd/lucide.js" as="script" />

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            fuchsia: tailwind.colors.fuchsia,
            amber: tailwind.colors.amber,
            neutral: tailwind.colors.neutral,
            emerald: tailwind.colors.emerald,
            sky: tailwind.colors.sky,
          },
          boxShadow: {
            card: "0 24px 80px rgba(15,23,42,0.85)",
          }
        }
      }
    };
  </script>

  <!-- Lucide -->
  <script defer src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

  <!-- Firebase ‚Äì pou≈æij stejnou inicializaci jako na login str√°nce -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
  <!-- Tady naƒçti sv≈Øj spoleƒçn√Ω soubor s konfigurac√≠, pokud ho pou≈æ√≠v√°≈° -->
  <script src="firebase-init.js"></script>

  <style>
    body {
      min-height: 100vh;
      background:
        radial-gradient(circle at top left, rgba(236,72,153,0.15), transparent 55%),
        radial-gradient(circle at bottom right, rgba(251,191,36,0.18), transparent 55%),
        radial-gradient(circle at bottom left, rgba(56,189,248,0.1), transparent 55%),
        #020617;
    }

    .glass {
      background: radial-gradient(circle at top left, rgba(248,250,252,0.12), rgba(15,23,42,0.96));
      backdrop-filter: blur(24px);
      -webkit-backdrop-filter: blur(24px);
    }
  </style>
</head>
<body class="text-slate-100">
  <div class="relative min-h-screen flex flex-col">
    <!-- Dekorativn√≠ kruhy -->
    <div class="pointer-events-none fixed inset-0 overflow-hidden">
      <div class="absolute -top-32 -right-24 h-72 w-72 rounded-full bg-fuchsia-500/10 blur-3xl"></div>
      <div class="absolute -bottom-32 -left-24 h-80 w-80 rounded-full bg-amber-400/10 blur-3xl"></div>
      <div class="absolute top-1/3 -left-32 h-64 w-64 rounded-full bg-sky-400/10 blur-3xl"></div>
    </div>

    <!-- Horn√≠ li≈°ta -->
    <header class="relative z-20 w-full">
      <div class="mx-auto max-w-6xl px-4 pt-6 flex items-center justify-between gap-4">
        <!-- Zpƒõt na p≈ôihl√°≈°en√≠ -->
        <a href="login.html"
           class="inline-flex items-center text-sm text-slate-300 hover:text-white transition">
          <span class="inline-flex items-center gap-2 rounded-full bg-slate-900/70 ring-1 ring-slate-700/60 px-3 py-1">
            <span class="text-base">‚Üê</span>
            <span>Zpƒõt na p≈ôihl√°≈°en√≠</span>
          </span>
        </a>

        <!-- Kartao badge -->
        <div class="inline-flex items-center gap-3 px-3 py-1.5 rounded-full
                    bg-slate-900/80 ring-1 ring-slate-700/70
                    shadow-lg shadow-black/40">
          <div class="relative flex h-8 w-8 items-center justify-center rounded-full
                      bg-gradient-to-br from-amber-400 via-fuchsia-500 to-sky-400
                      shadow-md shadow-amber-500/40">
            <i data-lucide="crown" class="w-4 h-4 text-black/80"></i>
          </div>
          <div class="flex flex-col leading-tight">
            <span class="text-xs font-semibold tracking-wide text-slate-200">
              Kartao.cz
            </span>
            <span class="text-[10px] uppercase tracking-[0.18em] text-slate-400">
              S√≠≈• influencer≈Ø
            </span>
          </div>
        </div>
      </div>
    </header>

    <!-- Obsah -->
    <main class="relative z-10 flex-1 flex items-center justify-center px-4 py-10">
      <div class="mx-auto flex w-full max-w-5xl flex-col gap-8 lg:flex-row lg:items-stretch">
        <!-- Info blok vlevo -->
        <section class="glass relative w-full max-w-xl rounded-3xl border border-slate-700/70 p-7 lg:p-9 shadow-card">
          <div class="absolute -top-6 right-6 inline-flex items-center gap-2 rounded-full border border-amber-400/60 bg-black/70 px-3 py-1 text-[11px] font-medium tracking-wide text-amber-100 shadow-lg shadow-amber-500/30">
            <span class="h-1.5 w-1.5 rounded-full bg-emerald-400 animate-pulse"></span>
            Obnoven√≠ p≈ô√≠stupu
          </div>

          <h1 class="mb-4 text-3xl sm:text-4xl font-bold tracking-tight">
            Zapomenut√©
            <span class="block bg-gradient-to-r from-amber-300 via-fuchsia-300 to-sky-300 bg-clip-text text-transparent">
              heslo k √∫ƒçtu
            </span>
          </h1>

          <p class="mb-4 text-sm sm:text-base text-slate-300/90">
            St√°v√° se. Zad√°≈° e-mail, kter√Ω pou≈æ√≠v√°≈° pro Kartao.cz, a my ti po≈°leme
            odkaz pro nastaven√≠ nov√©ho hesla p≈ôes Firebase.
          </p>

          <ul class="space-y-2 text-sm text-slate-200/90">
            <li class="flex gap-2">
              <span class="mt-0.5 text-emerald-400">‚óè</span>
              <span><strong>Bezpeƒçn√©</strong> ‚Äì odkaz pro zmƒõnu hesla je platn√Ω jen omezenou dobu.</span>
            </li>
            <li class="flex gap-2">
              <span class="mt-0.5 text-sky-400">‚óè</span>
              <span><strong>Jeden e-mail</strong> ‚Äì stejn√Ω p≈ô√≠stup pro v≈°echny role (influencer / firma).</span>
            </li>
            <li class="flex gap-2">
              <span class="mt-0.5 text-amber-300">‚óè</span>
              <span><strong>Nemƒõn√≠ se role</strong> ‚Äì po obnoven√≠ hesla z≈Østane v≈°e jak p≈ôedt√≠m.</span>
            </li>
          </ul>

          <div class="mt-6 text-[11px] text-slate-500">
            Pokud e-mail nedoraz√≠, zkontroluj spam/promotions nebo zkus zadat, zda nepou≈æ√≠v√°≈° jinou adresu.
          </div>
        </section>

        <!-- Formul√°≈ô vpravo -->
        <section class="relative w-full lg:max-w-md">
          <div class="glass relative w-full rounded-3xl border border-slate-700/70 p-6 sm:p-7 shadow-card">
            <h2 class="text-sm font-semibold tracking-[0.22em] text-slate-400 uppercase mb-1">
              Obnoven√≠ hesla
            </h2>
            <p class="text-sm text-slate-200/90 mb-5">
              Zadej e-mail, kter√Ω m√°≈° u sv√©ho √∫ƒçtu. Po≈°leme ti odkaz pro nastaven√≠ nov√©ho hesla.
            </p>

            <form id="resetForm" class="space-y-4">
              <div>
                <label for="resetEmail" class="block text-xs font-medium text-slate-300 mb-1.5">
                  E-mail k √∫ƒçtu
                </label>
                <input
                  id="resetEmail"
                  type="email"
                  required
                  class="w-full rounded-xl bg-black/40 border border-slate-700/80 px-3 py-2 text-sm text-slate-100 placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-fuchsia-400/70 focus:border-transparent"
                  placeholder="tvoje@email.cz"
                />
              </div>

              <div id="resetMessage" class="text-xs min-h-[1.25rem]"></div>

              <button
                id="resetSubmit"
                type="submit"
                class="w-full mt-1 inline-flex items-center justify-center rounded-xl
                       bg-gradient-to-r from-amber-400 via-fuchsia-500 to-sky-400
                       text-sm font-semibold text-black shadow-lg shadow-fuchsia-500/40
                       hover:brightness-110 hover:shadow-amber-400/40 transition-all py-2.5"
              >
                Odeslat odkaz pro obnoven√≠
              </button>
            </form>

            <div class="mt-5 text-[11px] text-slate-500 flex items-center justify-between">
              <span>Vzpomnƒõl/a sis? <a href="login.html" class="text-amber-200 hover:text-amber-100 underline underline-offset-2">Zpƒõt na p≈ôihl√°≈°en√≠</a></span>
              <span>Pot≈ôebuje≈° pomoc? Napi≈° na podporu.</span>
            </div>
          </div>
        </section>
      </div>
    </main>

    <!-- Spodn√≠ info -->
    <footer class="relative z-10 border-t border-slate-800/80 bg-black/40">
      <div class="mx-auto flex max-w-6xl flex-wrap items-center justify-between gap-3 px-4 py-4 text-[11px] text-slate-500">
        <span>¬© <span id="year"></span> Kartao.cz ‚Äì digit√°ln√≠ ekosyst√©m spoluprac√≠.</span>
        <div class="flex flex-wrap items-center gap-3">
          <span class="inline-flex items-center gap-1 rounded-full bg-slate-900/80 px-2.5 py-1 ring-1 ring-slate-700/80">
            <span class="h-1.5 w-1.5 rounded-full bg-emerald-400"></span>
            <span>Bezpeƒçn√© p≈ôihl√°≈°en√≠ p≈ôes Firebase</span>
          </span>
          <a href="podminky.html" class="hover:text-slate-300">Podm√≠nky pou≈æit√≠</a>
          <a href="ochrana-soukromi.html" class="hover:text-slate-300">Ochrana soukrom√≠</a>
        </div>
      </div>
    </footer>
  </div>

  <script>
    // rok v patiƒçce
    document.getElementById('year').textContent = new Date().getFullYear();

    document.addEventListener('DOMContentLoaded', function () {
      if (window.lucide) {
        lucide.createIcons();
      }

      const form = document.getElementById('resetForm');
      const emailInput = document.getElementById('resetEmail');
      const messageEl = document.getElementById('resetMessage');
      const submitBtn = document.getElementById('resetSubmit');

      if (!form) return;

      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        const email = emailInput.value.trim();
        if (!email) return;

        messageEl.textContent = '';
        messageEl.className = 'text-xs text-slate-400 min-h-[1.25rem]';
        submitBtn.disabled = true;
        submitBtn.classList.add('opacity-70');
        submitBtn.textContent = 'Odes√≠l√°me...';

        try {
          if (!window.firebase || !firebase.auth) {
            throw new Error('Firebase nen√≠ inicializov√°no.');
          }

          await firebase.auth().sendPasswordResetEmail(email);

          messageEl.textContent = 'Pokud tento e-mail existuje v na≈°em syst√©mu, pos√≠l√°me odkaz pro nastaven√≠ nov√©ho hesla.';
          messageEl.className = 'text-xs text-emerald-300 min-h-[1.25rem]';
        } catch (err) {
          console.error(err);
          let text = 'Nepoda≈ôilo se odeslat e-mail. Zkus to pros√≠m znovu.';
          if (err.code === 'auth/user-not-found') {
            text = 'Tento e-mail u n√°s nem√°me. Zkus jinou adresu nebo se nejd≈ô√≠v zaregistruj.';
          } else if (err.code === 'auth/invalid-email') {
            text = 'Zadan√Ω e-mail nem√° platn√Ω form√°t.';
          }
          messageEl.textContent = text;
          messageEl.className = 'text-xs text-rose-300 min-h-[1.25rem]';
        } finally {
          submitBtn.disabled = false;
          submitBtn.classList.remove('opacity-70');
          submitBtn.textContent = 'Odeslat odkaz pro obnoven√≠';
        }
      });
    });
  </script>
</body>
</html>
